var Fo=Object.create;var Yi=Object.defineProperty;var $o=Object.getOwnPropertyDescriptor;var ko=Object.getOwnPropertyNames;var qo=Object.getPrototypeOf,Vo=Object.prototype.hasOwnProperty;var A=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Uo=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ko(e))!Vo.call(n,i)&&i!==t&&Yi(n,i,{get:()=>e[i],enumerable:!(r=$o(e,i))||r.enumerable});return n};var Xi=(n,e,t)=>(t=n!=null?Fo(qo(n)):{},Uo(e||!n||!n.__esModule?Yi(t,"default",{value:n,enumerable:!0}):t,n));var Nt=A((Eu,ti)=>{"use strict";var Go=Object.prototype.hasOwnProperty,ye="~";function jt(){}Object.create&&(jt.prototype=Object.create(null),new jt().__proto__||(ye=!1));function Ho(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function Ki(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new Ho(t,r||n,i),l=ye?ye+e:e;return n._events[l]?n._events[l].fn?n._events[l]=[n._events[l],o]:n._events[l].push(o):(n._events[l]=o,n._eventsCount++),n}function gr(n,e){--n._eventsCount===0?n._events=new jt:delete n._events[e]}function be(){this._events=new jt,this._eventsCount=0}be.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)Go.call(t,r)&&e.push(ye?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};be.prototype.listeners=function(e){var t=ye?ye+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,l=new Array(o);i<o;i++)l[i]=r[i].fn;return l};be.prototype.listenerCount=function(e){var t=ye?ye+e:e,r=this._events[t];return r?r.fn?1:r.length:0};be.prototype.emit=function(e,t,r,i,o,l){var f=ye?ye+e:e;if(!this._events[f])return!1;var d=this._events[f],v=arguments.length,S,y;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),v){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,l),!0}for(y=1,S=new Array(v-1);y<v;y++)S[y-1]=arguments[y];d.fn.apply(d.context,S)}else{var V=d.length,D;for(y=0;y<V;y++)switch(d[y].once&&this.removeListener(e,d[y].fn,void 0,!0),v){case 1:d[y].fn.call(d[y].context);break;case 2:d[y].fn.call(d[y].context,t);break;case 3:d[y].fn.call(d[y].context,t,r);break;case 4:d[y].fn.call(d[y].context,t,r,i);break;default:if(!S)for(D=1,S=new Array(v-1);D<v;D++)S[D-1]=arguments[D];d[y].fn.apply(d[y].context,S)}}return!0};be.prototype.on=function(e,t,r){return Ki(this,e,t,r,!1)};be.prototype.once=function(e,t,r){return Ki(this,e,t,r,!0)};be.prototype.removeListener=function(e,t,r,i){var o=ye?ye+e:e;if(!this._events[o])return this;if(!t)return gr(this,o),this;var l=this._events[o];if(l.fn)l.fn===t&&(!i||l.once)&&(!r||l.context===r)&&gr(this,o);else{for(var f=0,d=[],v=l.length;f<v;f++)(l[f].fn!==t||i&&!l[f].once||r&&l[f].context!==r)&&d.push(l[f]);d.length?this._events[o]=d.length===1?d[0]:d:gr(this,o)}return this};be.prototype.removeAllListeners=function(e){var t;return e?(t=ye?ye+e:e,this._events[t]&&gr(this,t)):(this._events=new jt,this._eventsCount=0),this};be.prototype.off=be.prototype.removeListener;be.prototype.addListener=be.prototype.on;be.prefixed=ye;be.EventEmitter=be;typeof ti<"u"&&(ti.exports=be)});var ri=A(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.ButtplugLogger=Je.LogMessage=Je.ButtplugLogLevel=void 0;var zo=Nt(),We;(function(n){n[n.Off=0]="Off",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug",n[n.Trace=5]="Trace"})(We=Je.ButtplugLogLevel||(Je.ButtplugLogLevel={}));var mr=class{constructor(e,t){let r=new Date,i=r.getHours(),o=r.getMinutes(),l=r.getSeconds();this.timestamp=`${i}:${o}:${l}`,this.logMessage=e,this.logLevel=t}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${We[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}};Je.LogMessage=mr;var rt=class extends zo.EventEmitter{static get Logger(){return rt.sLogger===void 0&&(rt.sLogger=new rt),this.sLogger}constructor(){super(),this.maximumConsoleLogLevel=We.Off,this.maximumEventLogLevel=We.Off}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(e){this.maximumConsoleLogLevel=e}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(e){this.maximumEventLogLevel=e}Error(e){this.AddLogMessage(e,We.Error)}Warn(e){this.AddLogMessage(e,We.Warn)}Info(e){this.AddLogMessage(e,We.Info)}Debug(e){this.AddLogMessage(e,We.Debug)}Trace(e){this.AddLogMessage(e,We.Trace)}AddLogMessage(e,t){if(t>this.maximumEventLogLevel&&t>this.maximumConsoleLogLevel)return;let r=new mr(e,t);t<=this.maximumConsoleLogLevel&&console.log(r.FormattedMessage),t<=this.maximumEventLogLevel&&this.emit("log",r)}};Je.ButtplugLogger=rt;rt.sLogger=void 0});var Zi=A(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.TransformationType=void 0;var Wo;(function(n){n[n.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",n[n.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",n[n.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(Wo=Ft.TransformationType||(Ft.TransformationType={}))});var $t=A(pt=>{"use strict";var Jo=pt&&pt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Yo=pt&&pt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Jo(e,n,t)};Object.defineProperty(pt,"__esModule",{value:!0});Yo(Zi(),pt)});var Qi=A(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.MetadataStorage=void 0;var Ye=$t(),ni=class{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)}addTransformMetadata(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)}addExposeMetadata(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)}addExcludeMetadata(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)}findTransformMetadatas(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter(i=>!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?r===Ye.TransformationType.CLASS_TO_CLASS||r===Ye.TransformationType.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?r===Ye.TransformationType.CLASS_TO_PLAIN:!0)}findExcludeMetadata(e,t){return this.findMetadata(this._excludeMetadatas,e,t)}findExposeMetadata(e,t){return this.findMetadata(this._exposeMetadatas,e,t)}findExposeMetadataByCustomName(e,t){return this.getExposedMetadatas(e).find(r=>r.options&&r.options.name===t)}findTypeMetadata(e,t){return this.findMetadata(this._typeMetadatas,e,t)}getStrategy(e){let t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),i=this._exposeMetadatas.get(e),o=i&&i.get(void 0);return r&&o||!r&&!o?"none":r?"excludeAll":"exposeAll"}getExposedMetadatas(e){return this.getMetadata(this._exposeMetadatas,e)}getExcludedMetadatas(e){return this.getMetadata(this._excludeMetadatas,e)}getExposedProperties(e,t){return this.getExposedMetadatas(e).filter(r=>!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?t===Ye.TransformationType.CLASS_TO_CLASS||t===Ye.TransformationType.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?t===Ye.TransformationType.CLASS_TO_PLAIN:!0).map(r=>r.propertyName)}getExcludedProperties(e,t){return this.getExcludedMetadatas(e).filter(r=>!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?t===Ye.TransformationType.CLASS_TO_CLASS||t===Ye.TransformationType.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?t===Ye.TransformationType.CLASS_TO_PLAIN:!0).map(r=>r.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(e,t){let r=e.get(t),i;r&&(i=Array.from(r.values()).filter(l=>l.propertyName!==void 0));let o=[];for(let l of this.getAncestors(t)){let f=e.get(l);if(f){let d=Array.from(f.values()).filter(v=>v.propertyName!==void 0);o.push(...d)}}return o.concat(i||[])}findMetadata(e,t,r){let i=e.get(t);if(i){let o=i.get(r);if(o)return o}for(let o of this.getAncestors(t)){let l=e.get(o);if(l){let f=l.get(r);if(f)return f}}}findMetadatas(e,t,r){let i=e.get(t),o;i&&(o=i.get(r));let l=[];for(let f of this.getAncestors(t)){let d=e.get(f);d&&d.has(r)&&l.push(...d.get(r))}return l.slice().reverse().concat((o||[]).slice().reverse())}getAncestors(e){if(!e)return[];if(!this._ancestorsMap.has(e)){let t=[];for(let r=Object.getPrototypeOf(e.prototype.constructor);typeof r.prototype<"u";r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)}};vr.MetadataStorage=ni});var yt=A(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.defaultMetadataStorage=void 0;var Xo=Qi();br.defaultMetadataStorage=new Xo.MetadataStorage});var es=A(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.getGlobal=void 0;function Ko(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}_r.getGlobal=Ko});var ts=A(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.isPromise=void 0;function Zo(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}yr.isPromise=Zo});var ns=A(nt=>{"use strict";var Qo=nt&&nt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),rs=nt&&nt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Qo(e,n,t)};Object.defineProperty(nt,"__esModule",{value:!0});rs(es(),nt);rs(ts(),nt)});var ss=A(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.TransformOperationExecutor=void 0;var Te=yt(),oe=$t(),is=ns();function ea(n){let e=new n;return!(e instanceof Set)&&!("push"in e)?[]:e}var ii=class{constructor(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}transform(e,t,r,i,o,l=0){if(Array.isArray(t)||t instanceof Set){let f=i&&this.transformationType===oe.TransformationType.PLAIN_TO_CLASS?ea(i):[];return t.forEach((d,v)=>{let S=e?e[v]:void 0;if(!this.options.enableCircularCheck||!this.isCircular(d)){let y;if(typeof r!="function"&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(this.transformationType===oe.TransformationType.PLAIN_TO_CLASS){y=r.options.discriminator.subTypes.find(ae=>ae.name===d[r.options.discriminator.property]);let D={newObject:f,object:d,property:void 0},J=r.typeFunction(D);y===void 0?y=J:y=y.value,r.options.keepDiscriminatorProperty||delete d[r.options.discriminator.property]}this.transformationType===oe.TransformationType.CLASS_TO_CLASS&&(y=d.constructor),this.transformationType===oe.TransformationType.CLASS_TO_PLAIN&&(d[r.options.discriminator.property]=r.options.discriminator.subTypes.find(D=>D.value===d.constructor).name)}else y=r;let V=this.transform(S,d,y,void 0,d instanceof Map,l+1);f instanceof Set?f.add(V):f.push(V)}else this.transformationType===oe.TransformationType.CLASS_TO_CLASS&&(f instanceof Set?f.add(d):f.push(d))}),f}else{if(r===String&&!o)return t==null?t:String(t);if(r===Number&&!o)return t==null?t:Number(t);if(r===Boolean&&!o)return t==null?t:!!t;if((r===Date||t instanceof Date)&&!o)return t instanceof Date?new Date(t.valueOf()):t==null?t:new Date(t);if((0,is.getGlobal)().Buffer&&(r===Buffer||t instanceof Buffer)&&!o)return t==null?t:Buffer.from(t);if((0,is.isPromise)(t)&&!o)return new Promise((f,d)=>{t.then(v=>f(this.transform(void 0,v,r,void 0,void 0,l+1)),d)});if(!o&&t!==null&&typeof t=="object"&&typeof t.then=="function")return t;if(typeof t=="object"&&t!==null){!r&&t.constructor!==Object&&(!Array.isArray(t)&&t.constructor===Array||(r=t.constructor)),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);let f=this.getKeys(r,t,o),d=e||{};!e&&(this.transformationType===oe.TransformationType.PLAIN_TO_CLASS||this.transformationType===oe.TransformationType.CLASS_TO_CLASS)&&(o?d=new Map:r?d=new r:d={});for(let v of f){if(v==="__proto__"||v==="constructor")continue;let S=v,y=v,V=v;if(!this.options.ignoreDecorators&&r){if(this.transformationType===oe.TransformationType.PLAIN_TO_CLASS){let P=Te.defaultMetadataStorage.findExposeMetadataByCustomName(r,v);P&&(V=P.propertyName,y=P.propertyName)}else if(this.transformationType===oe.TransformationType.CLASS_TO_PLAIN||this.transformationType===oe.TransformationType.CLASS_TO_CLASS){let P=Te.defaultMetadataStorage.findExposeMetadata(r,v);P&&P.options&&P.options.name&&(y=P.options.name)}}let D;this.transformationType===oe.TransformationType.PLAIN_TO_CLASS?D=t[S]:t instanceof Map?D=t.get(S):t[S]instanceof Function?D=t[S]():D=t[S];let J,ae=D instanceof Map;if(r&&o)J=r;else if(r){let P=Te.defaultMetadataStorage.findTypeMetadata(r,V);if(P){let U={newObject:d,object:t,property:V},ut=P.typeFunction?P.typeFunction(U):P.reflectedType;P.options&&P.options.discriminator&&P.options.discriminator.property&&P.options.discriminator.subTypes?t[S]instanceof Array?J=P:(this.transformationType===oe.TransformationType.PLAIN_TO_CLASS&&(J=P.options.discriminator.subTypes.find(Ze=>{if(D&&D instanceof Object&&P.options.discriminator.property in D)return Ze.name===D[P.options.discriminator.property]}),J===void 0?J=ut:J=J.value,P.options.keepDiscriminatorProperty||D&&D instanceof Object&&P.options.discriminator.property in D&&delete D[P.options.discriminator.property]),this.transformationType===oe.TransformationType.CLASS_TO_CLASS&&(J=D.constructor),this.transformationType===oe.TransformationType.CLASS_TO_PLAIN&&D&&(D[P.options.discriminator.property]=P.options.discriminator.subTypes.find(Ze=>Ze.value===D.constructor).name)):J=ut,ae=ae||P.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(U=>U.target===r&&!!U.properties[V]).forEach(U=>J=U.properties[V]);else if(this.options.enableImplicitConversion&&this.transformationType===oe.TransformationType.PLAIN_TO_CLASS){let U=Reflect.getMetadata("design:type",r.prototype,V);U&&(J=U)}}let Ge=Array.isArray(t[S])?this.getReflectedType(r,V):void 0,He=e?e[S]:void 0;if(d.constructor.prototype){let P=Object.getOwnPropertyDescriptor(d.constructor.prototype,y);if((this.transformationType===oe.TransformationType.PLAIN_TO_CLASS||this.transformationType===oe.TransformationType.CLASS_TO_CLASS)&&(P&&!P.set||d[y]instanceof Function))continue}if(!this.options.enableCircularCheck||!this.isCircular(D)){let P=this.transformationType===oe.TransformationType.PLAIN_TO_CLASS?y:v,U;this.transformationType===oe.TransformationType.CLASS_TO_PLAIN?(U=t[P],U=this.applyCustomTransformations(U,r,P,t,this.transformationType),U=t[P]===U?D:U,U=this.transform(He,U,J,Ge,ae,l+1)):D===void 0&&this.options.exposeDefaultValues?U=d[y]:(U=this.transform(He,D,J,Ge,ae,l+1),U=this.applyCustomTransformations(U,r,P,t,this.transformationType)),(U!==void 0||this.options.exposeUnsetFields)&&(d instanceof Map?d.set(y,U):d[y]=U)}else if(this.transformationType===oe.TransformationType.CLASS_TO_CLASS){let P=D;P=this.applyCustomTransformations(P,r,v,t,this.transformationType),(P!==void 0||this.options.exposeUnsetFields)&&(d instanceof Map?d.set(y,P):d[y]=P)}}return this.options.enableCircularCheck&&this.recursionStack.delete(t),d}else return t}}applyCustomTransformations(e,t,r,i,o){let l=Te.defaultMetadataStorage.findTransformMetadatas(t,r,this.transformationType);return this.options.version!==void 0&&(l=l.filter(f=>f.options?this.checkVersion(f.options.since,f.options.until):!0)),this.options.groups&&this.options.groups.length?l=l.filter(f=>f.options?this.checkGroups(f.options.groups):!0):l=l.filter(f=>!f.options||!f.options.groups||!f.options.groups.length),l.forEach(f=>{e=f.transformFn({value:e,key:r,obj:i,type:o,options:this.options})}),e}isCircular(e){return this.recursionStack.has(e)}getReflectedType(e,t){if(!e)return;let r=Te.defaultMetadataStorage.findTypeMetadata(e,t);return r?r.reflectedType:void 0}getKeys(e,t,r){let i=Te.defaultMetadataStorage.getStrategy(e);i==="none"&&(i=this.options.strategy||"exposeAll");let o=[];if((i==="exposeAll"||r)&&(t instanceof Map?o=Array.from(t.keys()):o=Object.keys(t)),r)return o;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){let l=Te.defaultMetadataStorage.getExposedProperties(e,this.transformationType),f=Te.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);o=[...l,...f]}if(!this.options.ignoreDecorators&&e){let l=Te.defaultMetadataStorage.getExposedProperties(e,this.transformationType);this.transformationType===oe.TransformationType.PLAIN_TO_CLASS&&(l=l.map(d=>{let v=Te.defaultMetadataStorage.findExposeMetadata(e,d);return v&&v.options&&v.options.name?v.options.name:d})),this.options.excludeExtraneousValues?o=l:o=o.concat(l);let f=Te.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);f.length>0&&(o=o.filter(d=>!f.includes(d))),this.options.version!==void 0&&(o=o.filter(d=>{let v=Te.defaultMetadataStorage.findExposeMetadata(e,d);return!v||!v.options?!0:this.checkVersion(v.options.since,v.options.until)})),this.options.groups&&this.options.groups.length?o=o.filter(d=>{let v=Te.defaultMetadataStorage.findExposeMetadata(e,d);return!v||!v.options?!0:this.checkGroups(v.options.groups)}):o=o.filter(d=>{let v=Te.defaultMetadataStorage.findExposeMetadata(e,d);return!v||!v.options||!v.options.groups||!v.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(o=o.filter(l=>this.options.excludePrefixes.every(f=>l.substr(0,f.length)!==f))),o=o.filter((l,f,d)=>d.indexOf(l)===f),o}checkVersion(e,t){let r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r}checkGroups(e){return e?this.options.groups.some(t=>e.includes(t)):!0}};Sr.TransformOperationExecutor=ii});var os=A(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.defaultOptions=void 0;Mr.defaultOptions={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0}});var Et=A(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.ClassTransformer=void 0;var St=ss(),Mt=$t(),wt=os(),si=class{instanceToPlain(e,t){return new St.TransformOperationExecutor(Mt.TransformationType.CLASS_TO_PLAIN,{...wt.defaultOptions,...t}).transform(void 0,e,void 0,void 0,void 0,void 0)}classToPlainFromExist(e,t,r){return new St.TransformOperationExecutor(Mt.TransformationType.CLASS_TO_PLAIN,{...wt.defaultOptions,...r}).transform(t,e,void 0,void 0,void 0,void 0)}plainToInstance(e,t,r){return new St.TransformOperationExecutor(Mt.TransformationType.PLAIN_TO_CLASS,{...wt.defaultOptions,...r}).transform(void 0,t,e,void 0,void 0,void 0)}plainToClassFromExist(e,t,r){return new St.TransformOperationExecutor(Mt.TransformationType.PLAIN_TO_CLASS,{...wt.defaultOptions,...r}).transform(e,t,void 0,void 0,void 0,void 0)}instanceToInstance(e,t){return new St.TransformOperationExecutor(Mt.TransformationType.CLASS_TO_CLASS,{...wt.defaultOptions,...t}).transform(void 0,e,void 0,void 0,void 0,void 0)}classToClassFromExist(e,t,r){return new St.TransformOperationExecutor(Mt.TransformationType.CLASS_TO_CLASS,{...wt.defaultOptions,...r}).transform(t,e,void 0,void 0,void 0,void 0)}serialize(e,t){return JSON.stringify(this.instanceToPlain(e,t))}deserialize(e,t,r){let i=JSON.parse(t);return this.plainToInstance(e,i,r)}deserializeArray(e,t,r){let i=JSON.parse(t);return this.plainToInstance(e,i,r)}};wr.ClassTransformer=si});var as=A(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.Exclude=void 0;var ta=yt();function ra(n={}){return function(e,t){ta.defaultMetadataStorage.addExcludeMetadata({target:e instanceof Function?e:e.constructor,propertyName:t,options:n})}}Er.Exclude=ra});var us=A(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Expose=void 0;var na=yt();function ia(n={}){return function(e,t){na.defaultMetadataStorage.addExposeMetadata({target:e instanceof Function?e:e.constructor,propertyName:t,options:n})}}Tr.Expose=ia});var ls=A(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.TransformInstanceToInstance=void 0;var sa=Et();function oa(n){return function(e,t,r){let i=new sa.ClassTransformer,o=r.value;r.value=function(...l){let f=o.apply(this,l);return!!f&&(typeof f=="object"||typeof f=="function")&&typeof f.then=="function"?f.then(v=>i.instanceToInstance(v,n)):i.instanceToInstance(f,n)}}}Or.TransformInstanceToInstance=oa});var cs=A(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.TransformInstanceToPlain=void 0;var aa=Et();function ua(n){return function(e,t,r){let i=new aa.ClassTransformer,o=r.value;r.value=function(...l){let f=o.apply(this,l);return!!f&&(typeof f=="object"||typeof f=="function")&&typeof f.then=="function"?f.then(v=>i.instanceToPlain(v,n)):i.instanceToPlain(f,n)}}}Lr.TransformInstanceToPlain=ua});var ds=A(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.TransformPlainToInstance=void 0;var la=Et();function ca(n,e){return function(t,r,i){let o=new la.ClassTransformer,l=i.value;i.value=function(...f){let d=l.apply(this,f);return!!d&&(typeof d=="object"||typeof d=="function")&&typeof d.then=="function"?d.then(S=>o.plainToInstance(n,S,e)):o.plainToInstance(n,d,e)}}}Cr.TransformPlainToInstance=ca});var fs=A(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.Transform=void 0;var da=yt();function fa(n,e={}){return function(t,r){da.defaultMetadataStorage.addTransformMetadata({target:t.constructor,propertyName:r,transformFn:n,options:e})}}Ar.Transform=fa});var ps=A(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.Type=void 0;var pa=yt();function ha(n,e={}){return function(t,r){let i=Reflect.getMetadata("design:type",t,r);pa.defaultMetadataStorage.addTypeMetadata({target:t.constructor,propertyName:r,reflectedType:i,typeFunction:n,options:e})}}Dr.Type=ha});var hs=A(Ae=>{"use strict";var ga=Ae&&Ae.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ht=Ae&&Ae.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ga(e,n,t)};Object.defineProperty(Ae,"__esModule",{value:!0});ht(as(),Ae);ht(us(),Ae);ht(ls(),Ae);ht(cs(),Ae);ht(ds(),Ae);ht(fs(),Ae);ht(ps(),Ae)});var ms=A(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0})});var bs=A(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0})});var ys=A(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0})});var Ms=A(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0})});var Es=A(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0})});var Os=A(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0})});var Cs=A(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0})});var Ds=A(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0})});var Ps=A(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0})});var Is=A(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0})});var js=A(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0})});var Fs=A(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0})});var ks=A($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0})});var Vs=A(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0})});var Us=A(ue=>{"use strict";var ma=ue&&ue.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Oe=ue&&ue.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ma(e,n,t)};Object.defineProperty(ue,"__esModule",{value:!0});Oe(ms(),ue);Oe(bs(),ue);Oe(ys(),ue);Oe(Ms(),ue);Oe(Es(),ue);Oe(Os(),ue);Oe(Cs(),ue);Oe(Ds(),ue);Oe(Ps(),ue);Oe(Is(),ue);Oe(js(),ue);Oe(Fs(),ue);Oe(ks(),ue);Oe(Vs(),ue)});var ai=A(z=>{"use strict";var va=z&&z.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),oi=z&&z.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&va(e,n,t)};Object.defineProperty(z,"__esModule",{value:!0});z.deserializeArray=z.deserialize=z.serialize=z.classToClassFromExist=z.instanceToInstance=z.plainToClassFromExist=z.plainToInstance=z.plainToClass=z.classToPlainFromExist=z.instanceToPlain=z.classToPlain=z.ClassTransformer=void 0;var ba=Et(),_a=Et();Object.defineProperty(z,"ClassTransformer",{enumerable:!0,get:function(){return _a.ClassTransformer}});oi(hs(),z);oi(Us(),z);oi($t(),z);var je=new ba.ClassTransformer;function ya(n,e){return je.instanceToPlain(n,e)}z.classToPlain=ya;function Sa(n,e){return je.instanceToPlain(n,e)}z.instanceToPlain=Sa;function Ma(n,e,t){return je.classToPlainFromExist(n,e,t)}z.classToPlainFromExist=Ma;function wa(n,e,t){return je.plainToInstance(n,e,t)}z.plainToClass=wa;function Ea(n,e,t){return je.plainToInstance(n,e,t)}z.plainToInstance=Ea;function Ta(n,e,t){return je.plainToClassFromExist(n,e,t)}z.plainToClassFromExist=Ta;function Oa(n,e){return je.instanceToInstance(n,e)}z.instanceToInstance=Oa;function La(n,e,t){return je.classToClassFromExist(n,e,t)}z.classToClassFromExist=La;function Ca(n,e){return je.serialize(n,e)}z.serialize=Ca;function Aa(n,e,t){return je.deserialize(n,e,t)}z.deserialize=Aa;function Da(n,e,t){return je.deserializeArray(n,e,t)}z.deserializeArray=Da});var Hs=A(()=>{var Gs;(function(n){(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=i(n);typeof t.Reflect>"u"?t.Reflect=n:r=i(t.Reflect,r),e(r);function i(o,l){return function(f,d){typeof o[f]!="function"&&Object.defineProperty(o,f,{configurable:!0,writable:!0,value:d}),l&&l(f,d)}}})(function(e){var t=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",i=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",l=typeof Object.create=="function",f={__proto__:[]}instanceof Array,d=!l&&!f,v={create:l?function(){return mt(Object.create(null))}:f?function(){return mt({__proto__:null})}:function(){return mt({})},has:d?function(c,h){return t.call(c,h)}:function(c,h){return h in c},get:d?function(c,h){return t.call(c,h)?c[h]:void 0}:function(c,h){return c[h]}},S=Object.getPrototypeOf(Function),y=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",V=!y&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Cn(),D=!y&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:An(),J=!y&&typeof WeakMap=="function"?WeakMap:Dn(),ae=new J;function Ge(c,h,_,M){if(te(_)){if(!Q(c))throw new TypeError;if(!er(h))throw new TypeError;return yn(c,h)}else{if(!Q(c))throw new TypeError;if(!re(h))throw new TypeError;if(!re(M)&&!te(M)&&!Qe(M))throw new TypeError;return Qe(M)&&(M=void 0),_=ce(_),Sn(c,h,_,M)}}e("decorate",Ge);function He(c,h){function _(M,L){if(!re(M))throw new TypeError;if(!te(L)&&!de(L))throw new TypeError;Xt(c,h,M,L)}return _}e("metadata",He);function P(c,h,_,M){if(!re(_))throw new TypeError;return te(M)||(M=ce(M)),Xt(c,h,_,M)}e("defineMetadata",P);function U(c,h,_){if(!re(h))throw new TypeError;return te(_)||(_=ce(_)),Wt(c,h,_)}e("hasMetadata",U);function ut(c,h,_){if(!re(h))throw new TypeError;return te(_)||(_=ce(_)),xt(c,h,_)}e("hasOwnMetadata",ut);function Ze(c,h,_){if(!re(h))throw new TypeError;return te(_)||(_=ce(_)),Jt(c,h,_)}e("getMetadata",Ze);function mn(c,h,_){if(!re(h))throw new TypeError;return te(_)||(_=ce(_)),Yt(c,h,_)}e("getOwnMetadata",mn);function vn(c,h){if(!re(c))throw new TypeError;return te(h)||(h=ce(h)),Kt(c,h)}e("getMetadataKeys",vn);function bn(c,h){if(!re(c))throw new TypeError;return te(h)||(h=ce(h)),Zt(c,h)}e("getOwnMetadataKeys",bn);function _n(c,h,_){if(!re(h))throw new TypeError;te(_)||(_=ce(_));var M=lt(h,_,!1);if(te(M)||!M.delete(c))return!1;if(M.size>0)return!0;var L=ae.get(h);return L.delete(_),L.size>0||ae.delete(h),!0}e("deleteMetadata",_n);function yn(c,h){for(var _=c.length-1;_>=0;--_){var M=c[_],L=M(h);if(!te(L)&&!Qe(L)){if(!er(L))throw new TypeError;h=L}}return h}function Sn(c,h,_,M){for(var L=c.length-1;L>=0;--L){var fe=c[L],j=fe(h,_,M);if(!te(j)&&!Qe(j)){if(!re(j))throw new TypeError;M=j}}return M}function lt(c,h,_){var M=ae.get(c);if(te(M)){if(!_)return;M=new V,ae.set(c,M)}var L=M.get(h);if(te(L)){if(!_)return;L=new V,M.set(h,L)}return L}function Wt(c,h,_){var M=xt(c,h,_);if(M)return!0;var L=ct(h);return Qe(L)?!1:Wt(c,L,_)}function xt(c,h,_){var M=lt(h,_,!1);return te(M)?!1:et(M.has(c))}function Jt(c,h,_){var M=xt(c,h,_);if(M)return Yt(c,h,_);var L=ct(h);if(!Qe(L))return Jt(c,L,_)}function Yt(c,h,_){var M=lt(h,_,!1);if(!te(M))return M.get(c)}function Xt(c,h,_,M){var L=lt(_,M,!0);L.set(c,h)}function Kt(c,h){var _=Zt(c,h),M=ct(c);if(M===null)return _;var L=Kt(M,h);if(L.length<=0)return _;if(_.length<=0)return L;for(var fe=new D,j=[],N=0,C=_;N<C.length;N++){var G=C[N],H=fe.has(G);H||(fe.add(G),j.push(G))}for(var $e=0,rr=L;$e<rr.length;$e++){var G=rr[$e],H=fe.has(G);H||(fe.add(G),j.push(G))}return j}function Zt(c,h){var _=[],M=lt(c,h,!1);if(te(M))return _;for(var L=M.keys(),fe=En(L),j=0;;){var N=On(fe);if(!N)return _.length=j,_;var C=Tn(N);try{_[j]=C}catch(G){try{Ln(fe)}finally{throw G}}j++}}function Qt(c){if(c===null)return 1;switch(typeof c){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return c===null?1:6;default:return 6}}function te(c){return c===void 0}function Qe(c){return c===null}function Mn(c){return typeof c=="symbol"}function re(c){return typeof c=="object"?c!==null:typeof c=="function"}function wn(c,h){switch(Qt(c)){case 0:return c;case 1:return c;case 2:return c;case 3:return c;case 4:return c;case 5:return c}var _=h===3?"string":h===5?"number":"default",M=tr(c,i);if(M!==void 0){var L=M.call(c,_);if(re(L))throw new TypeError;return L}return Ce(c,_==="default"?"number":_)}function Ce(c,h){if(h==="string"){var _=c.toString;if(ze(_)){var M=_.call(c);if(!re(M))return M}var L=c.valueOf;if(ze(L)){var M=L.call(c);if(!re(M))return M}}else{var L=c.valueOf;if(ze(L)){var M=L.call(c);if(!re(M))return M}var fe=c.toString;if(ze(fe)){var M=fe.call(c);if(!re(M))return M}}throw new TypeError}function et(c){return!!c}function Pt(c){return""+c}function ce(c){var h=wn(c,3);return Mn(h)?h:Pt(h)}function Q(c){return Array.isArray?Array.isArray(c):c instanceof Object?c instanceof Array:Object.prototype.toString.call(c)==="[object Array]"}function ze(c){return typeof c=="function"}function er(c){return typeof c=="function"}function de(c){switch(Qt(c)){case 3:return!0;case 4:return!0;default:return!1}}function tr(c,h){var _=c[h];if(_!=null){if(!ze(_))throw new TypeError;return _}}function En(c){var h=tr(c,o);if(!ze(h))throw new TypeError;var _=h.call(c);if(!re(_))throw new TypeError;return _}function Tn(c){return c.value}function On(c){var h=c.next();return h.done?!1:h}function Ln(c){var h=c.return;h&&h.call(c)}function ct(c){var h=Object.getPrototypeOf(c);if(typeof c!="function"||c===S||h!==S)return h;var _=c.prototype,M=_&&Object.getPrototypeOf(_);if(M==null||M===Object.prototype)return h;var L=M.constructor;return typeof L!="function"||L===c?h:L}function Cn(){var c={},h=[],_=function(){function j(N,C,G){this._index=0,this._keys=N,this._values=C,this._selector=G}return j.prototype["@@iterator"]=function(){return this},j.prototype[o]=function(){return this},j.prototype.next=function(){var N=this._index;if(N>=0&&N<this._keys.length){var C=this._selector(this._keys[N],this._values[N]);return N+1>=this._keys.length?(this._index=-1,this._keys=h,this._values=h):this._index++,{value:C,done:!1}}return{value:void 0,done:!0}},j.prototype.throw=function(N){throw this._index>=0&&(this._index=-1,this._keys=h,this._values=h),N},j.prototype.return=function(N){return this._index>=0&&(this._index=-1,this._keys=h,this._values=h),{value:N,done:!0}},j}();return function(){function j(){this._keys=[],this._values=[],this._cacheKey=c,this._cacheIndex=-2}return Object.defineProperty(j.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),j.prototype.has=function(N){return this._find(N,!1)>=0},j.prototype.get=function(N){var C=this._find(N,!1);return C>=0?this._values[C]:void 0},j.prototype.set=function(N,C){var G=this._find(N,!0);return this._values[G]=C,this},j.prototype.delete=function(N){var C=this._find(N,!1);if(C>=0){for(var G=this._keys.length,H=C+1;H<G;H++)this._keys[H-1]=this._keys[H],this._values[H-1]=this._values[H];return this._keys.length--,this._values.length--,N===this._cacheKey&&(this._cacheKey=c,this._cacheIndex=-2),!0}return!1},j.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=c,this._cacheIndex=-2},j.prototype.keys=function(){return new _(this._keys,this._values,M)},j.prototype.values=function(){return new _(this._keys,this._values,L)},j.prototype.entries=function(){return new _(this._keys,this._values,fe)},j.prototype["@@iterator"]=function(){return this.entries()},j.prototype[o]=function(){return this.entries()},j.prototype._find=function(N,C){return this._cacheKey!==N&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=N)),this._cacheIndex<0&&C&&(this._cacheIndex=this._keys.length,this._keys.push(N),this._values.push(void 0)),this._cacheIndex},j}();function M(j,N){return j}function L(j,N){return N}function fe(j,N){return[j,N]}}function An(){return function(){function c(){this._map=new V}return Object.defineProperty(c.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),c.prototype.has=function(h){return this._map.has(h)},c.prototype.add=function(h){return this._map.set(h,h),this},c.prototype.delete=function(h){return this._map.delete(h)},c.prototype.clear=function(){this._map.clear()},c.prototype.keys=function(){return this._map.keys()},c.prototype.values=function(){return this._map.values()},c.prototype.entries=function(){return this._map.entries()},c.prototype["@@iterator"]=function(){return this.keys()},c.prototype[o]=function(){return this.keys()},c}()}function Dn(){var c=16,h=v.create(),_=M();return function(){function C(){this._key=M()}return C.prototype.has=function(G){var H=L(G,!1);return H!==void 0?v.has(H,this._key):!1},C.prototype.get=function(G){var H=L(G,!1);return H!==void 0?v.get(H,this._key):void 0},C.prototype.set=function(G,H){var $e=L(G,!0);return $e[this._key]=H,this},C.prototype.delete=function(G){var H=L(G,!1);return H!==void 0?delete H[this._key]:!1},C.prototype.clear=function(){this._key=M()},C}();function M(){var C;do C="@@WeakMap@@"+N();while(v.has(h,C));return h[C]=!0,C}function L(C,G){if(!t.call(C,_)){if(!G)return;Object.defineProperty(C,_,{value:v.create()})}return C[_]}function fe(C,G){for(var H=0;H<G;++H)C[H]=Math.random()*255|0;return C}function j(C){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(C)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(C)):fe(new Uint8Array(C),C):fe(new Array(C),C)}function N(){var C=j(c);C[6]=C[6]&79|64,C[8]=C[8]&191|128;for(var G="",H=0;H<c;++H){var $e=C[H];(H===4||H===6||H===8)&&(G+="-"),$e<16&&(G+="0"),G+=$e.toString(16).toLowerCase()}return G}}function mt(c){return c.__=void 0,delete c.__,c}})})(Gs||(Gs={}))});var st=A(g=>{"use strict";var fi=g&&g.__decorate||function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var f=n.length-1;f>=0;f--)(l=n[f])&&(o=(i<3?l(o):i>3?l(e,t,o):l(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pi=g&&g.__metadata||function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};Object.defineProperty(g,"__esModule",{value:!0});g.RawReading=g.RawUnsubscribeCmd=g.RawSubscribeCmd=g.RawWriteCmd=g.RawReadCmd=g.SensorReading=g.SensorReadCmd=g.LinearCmd=g.VectorSubcommand=g.RotateCmd=g.RotateSubcommand=g.ScalarCmd=g.ScalarSubcommand=g.GenericMessageSubcommand=g.StopAllDevices=g.StopDeviceCmd=g.ServerInfo=g.RequestServerInfo=g.ScanningFinished=g.StopScanning=g.StartScanning=g.RequestDeviceList=g.DeviceRemoved=g.DeviceAdded=g.DeviceList=g.DeviceInfo=g.Error=g.ErrorClass=g.Ping=g.Ok=g.ButtplugSystemMessage=g.ButtplugDeviceMessage=g.ButtplugMessage=g.SensorDeviceMessageAttributes=g.RawDeviceMessageAttributes=g.GenericDeviceMessageAttributes=g.SensorType=g.ActuatorType=g.MessageAttributes=g.MESSAGE_SPEC_VERSION=g.MAX_ID=g.DEFAULT_MESSAGE_ID=g.SYSTEM_MESSAGE_ID=void 0;var Qr=ai();Hs();g.SYSTEM_MESSAGE_ID=0;g.DEFAULT_MESSAGE_ID=1;g.MAX_ID=4294967295;g.MESSAGE_SPEC_VERSION=3;var gt=class{constructor(e){Object.assign(this,e)}update(){var e,t,r,i,o;(e=this.ScalarCmd)===null||e===void 0||e.forEach((l,f)=>l.Index=f),(t=this.RotateCmd)===null||t===void 0||t.forEach((l,f)=>l.Index=f),(r=this.LinearCmd)===null||r===void 0||r.forEach((l,f)=>l.Index=f),(i=this.SensorReadCmd)===null||i===void 0||i.forEach((l,f)=>l.Index=f),(o=this.SensorSubscribeCmd)===null||o===void 0||o.forEach((l,f)=>l.Index=f)}};g.MessageAttributes=gt;var xa;(function(n){n.Unknown="Unknown",n.Vibrate="Vibrate",n.Rotate="Rotate",n.Oscillate="Oscillate",n.Constrict="Constrict",n.Inflate="Inflate",n.Position="Position"})(xa=g.ActuatorType||(g.ActuatorType={}));var Pa;(function(n){n.Unknown="Unknown",n.Battery="Battery",n.RSSI="RSSI",n.Button="Button",n.Pressure="Pressure"})(Pa=g.SensorType||(g.SensorType={}));var ui=class{constructor(e){this.Index=0,Object.assign(this,e)}};g.GenericDeviceMessageAttributes=ui;var li=class{constructor(e){this.Endpoints=e}};g.RawDeviceMessageAttributes=li;var ci=class{constructor(e){this.Index=0,Object.assign(this,e)}};g.SensorDeviceMessageAttributes=ci;var De=class{constructor(e){this.Id=e}get Type(){return this.constructor}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){let e={};return e[this.constructor.Name]=(0,Qr.instanceToPlain)(this),e}update(){}};g.ButtplugMessage=De;var Le=class extends De{constructor(e,t){super(t),this.DeviceIndex=e,this.Id=t}};g.ButtplugDeviceMessage=Le;var it=class extends De{constructor(e=g.SYSTEM_MESSAGE_ID){super(e),this.Id=e}};g.ButtplugSystemMessage=it;var xr=class extends it{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.Ok=xr;xr.Name="Ok";var Pr=class extends De{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.Ping=Pr;Pr.Name="Ping";var zs;(function(n){n[n.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",n[n.ERROR_INIT=1]="ERROR_INIT",n[n.ERROR_PING=2]="ERROR_PING",n[n.ERROR_MSG=3]="ERROR_MSG",n[n.ERROR_DEVICE=4]="ERROR_DEVICE"})(zs=g.ErrorClass||(g.ErrorClass={}));var Rr=class extends De{constructor(e,t=zs.ERROR_UNKNOWN,r=g.DEFAULT_MESSAGE_ID){super(r),this.ErrorMessage=e,this.ErrorCode=t,this.Id=r}get Schemversion(){return 0}};g.Error=Rr;Rr.Name="Error";var kt=class{constructor(e){Object.assign(this,e)}};fi([(0,Qr.Type)(()=>gt),pi("design:type",gt)],kt.prototype,"DeviceMessages",void 0);g.DeviceInfo=kt;var qt=class extends De{constructor(e,t=g.DEFAULT_MESSAGE_ID){super(t),this.Devices=e,this.Id=t}update(){for(let e of this.Devices)e.DeviceMessages.update()}};qt.Name="DeviceList";fi([(0,Qr.Type)(()=>kt),pi("design:type",Array)],qt.prototype,"Devices",void 0);g.DeviceList=qt;var Vt=class extends it{constructor(e){super(),Object.assign(this,e)}update(){this.DeviceMessages.update()}};Vt.Name="DeviceAdded";fi([(0,Qr.Type)(()=>gt),pi("design:type",gt)],Vt.prototype,"DeviceMessages",void 0);g.DeviceAdded=Vt;var Ir=class extends it{constructor(e){super(),this.DeviceIndex=e}};g.DeviceRemoved=Ir;Ir.Name="DeviceRemoved";var Br=class extends De{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.RequestDeviceList=Br;Br.Name="RequestDeviceList";var jr=class extends De{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.StartScanning=jr;jr.Name="StartScanning";var Nr=class extends De{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.StopScanning=Nr;Nr.Name="StopScanning";var Fr=class extends it{constructor(){super()}};g.ScanningFinished=Fr;Fr.Name="ScanningFinished";var $r=class extends De{constructor(e,t=0,r=g.DEFAULT_MESSAGE_ID){super(r),this.ClientName=e,this.MessageVersion=t,this.Id=r}};g.RequestServerInfo=$r;$r.Name="RequestServerInfo";var kr=class extends it{constructor(e,t,r,i=g.DEFAULT_MESSAGE_ID){super(),this.MessageVersion=e,this.MaxPingTime=t,this.ServerName=r,this.Id=i}};g.ServerInfo=kr;kr.Name="ServerInfo";var qr=class extends Le{constructor(e=-1,t=g.DEFAULT_MESSAGE_ID){super(e,t),this.DeviceIndex=e,this.Id=t}};g.StopDeviceCmd=qr;qr.Name="StopDeviceCmd";var Vr=class extends De{constructor(e=g.DEFAULT_MESSAGE_ID){super(e),this.Id=e}};g.StopAllDevices=Vr;Vr.Name="StopAllDevices";var Tt=class{constructor(e){this.Index=e}};g.GenericMessageSubcommand=Tt;var di=class extends Tt{constructor(e,t,r){super(e),this.Scalar=t,this.ActuatorType=r}};g.ScalarSubcommand=di;var Ur=class extends Le{constructor(e,t=-1,r=g.DEFAULT_MESSAGE_ID){super(t,r),this.Scalars=e,this.DeviceIndex=t,this.Id=r}};g.ScalarCmd=Ur;Ur.Name="ScalarCmd";var Gr=class extends Tt{constructor(e,t,r){super(e),this.Speed=t,this.Clockwise=r}};g.RotateSubcommand=Gr;var Ot=class extends Le{static Create(e,t){let r=new Array,i=0;for(let[o,l]of t)r.push(new Gr(i,o,l)),++i;return new Ot(r,e)}constructor(e,t=-1,r=g.DEFAULT_MESSAGE_ID){super(t,r),this.Rotations=e,this.DeviceIndex=t,this.Id=r}};g.RotateCmd=Ot;Ot.Name="RotateCmd";var Hr=class extends Tt{constructor(e,t,r){super(e),this.Position=t,this.Duration=r}};g.VectorSubcommand=Hr;var Lt=class extends Le{static Create(e,t){let r=new Array,i=0;for(let o of t)r.push(new Hr(i,o[0],o[1])),++i;return new Lt(r,e)}constructor(e,t=-1,r=g.DEFAULT_MESSAGE_ID){super(t,r),this.Vectors=e,this.DeviceIndex=t,this.Id=r}};g.LinearCmd=Lt;Lt.Name="LinearCmd";var zr=class extends Le{constructor(e,t,r,i=g.DEFAULT_MESSAGE_ID){super(e,i),this.DeviceIndex=e,this.SensorIndex=t,this.SensorType=r,this.Id=i}};g.SensorReadCmd=zr;zr.Name="SensorReadCmd";var Wr=class extends Le{constructor(e,t,r,i,o=g.DEFAULT_MESSAGE_ID){super(e,o),this.DeviceIndex=e,this.SensorIndex=t,this.SensorType=r,this.Data=i,this.Id=o}};g.SensorReading=Wr;Wr.Name="SensorReading";var Jr=class extends Le{constructor(e,t,r,i,o=g.DEFAULT_MESSAGE_ID){super(e,o),this.DeviceIndex=e,this.Endpoint=t,this.ExpectedLength=r,this.Timeout=i,this.Id=o}};g.RawReadCmd=Jr;Jr.Name="RawReadCmd";var Yr=class extends Le{constructor(e,t,r,i,o=g.DEFAULT_MESSAGE_ID){super(e,o),this.DeviceIndex=e,this.Endpoint=t,this.Data=r,this.WriteWithResponse=i,this.Id=o}};g.RawWriteCmd=Yr;Yr.Name="RawWriteCmd";var Xr=class extends Le{constructor(e,t,r=g.DEFAULT_MESSAGE_ID){super(e,r),this.DeviceIndex=e,this.Endpoint=t,this.Id=r}};g.RawSubscribeCmd=Xr;Xr.Name="RawSubscribeCmd";var Kr=class extends Le{constructor(e,t,r=g.DEFAULT_MESSAGE_ID){super(e,r),this.DeviceIndex=e,this.Endpoint=t,this.Id=r}};g.RawUnsubscribeCmd=Kr;Kr.Name="RawUnsubscribeCmd";var Zr=class extends Le{constructor(e,t,r,i=g.DEFAULT_MESSAGE_ID){super(e,i),this.DeviceIndex=e,this.Endpoint=t,this.Data=r,this.Id=i}};g.RawReading=Zr;Zr.Name="RawReading"});var Ct=A(le=>{"use strict";var Ra=le&&le.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ia=le&&le.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Ba=le&&le.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Ra(e,n,t);return Ia(e,n),e};Object.defineProperty(le,"__esModule",{value:!0});le.ButtplugUnknownError=le.ButtplugPingError=le.ButtplugMessageError=le.ButtplugDeviceError=le.ButtplugInitError=le.ButtplugError=void 0;var he=Ba(st()),ot=class extends Error{get ErrorClass(){return this.errorClass}get InnerError(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new he.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(e,t,r,i=he.SYSTEM_MESSAGE_ID){return t.Error(r),new e(r,i)}static FromError(e){switch(e.ErrorCode){case he.ErrorClass.ERROR_DEVICE:return new tn(e.ErrorMessage,e.Id);case he.ErrorClass.ERROR_INIT:return new en(e.ErrorMessage,e.Id);case he.ErrorClass.ERROR_UNKNOWN:return new sn(e.ErrorMessage,e.Id);case he.ErrorClass.ERROR_PING:return new nn(e.ErrorMessage,e.Id);case he.ErrorClass.ERROR_MSG:return new rn(e.ErrorMessage,e.Id);default:throw new Error(`Message type ${e.ErrorCode} not handled`)}}constructor(e,t,r=he.SYSTEM_MESSAGE_ID,i){super(e),this.errorClass=he.ErrorClass.ERROR_UNKNOWN,this.errorClass=t,this.innerError=i,this.messageId=r}};le.ButtplugError=ot;var en=class extends ot{constructor(e,t=he.SYSTEM_MESSAGE_ID){super(e,he.ErrorClass.ERROR_INIT,t)}};le.ButtplugInitError=en;var tn=class extends ot{constructor(e,t=he.SYSTEM_MESSAGE_ID){super(e,he.ErrorClass.ERROR_DEVICE,t)}};le.ButtplugDeviceError=tn;var rn=class extends ot{constructor(e,t=he.SYSTEM_MESSAGE_ID){super(e,he.ErrorClass.ERROR_MSG,t)}};le.ButtplugMessageError=rn;var nn=class extends ot{constructor(e,t=he.SYSTEM_MESSAGE_ID){super(e,he.ErrorClass.ERROR_PING,t)}};le.ButtplugPingError=nn;var sn=class extends ot{constructor(e,t=he.SYSTEM_MESSAGE_ID){super(e,he.ErrorClass.ERROR_UNKNOWN,t)}};le.ButtplugUnknownError=sn});var hi=A(Pe=>{"use strict";var ja=Pe&&Pe.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Na=Pe&&Pe.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Fa=Pe&&Pe.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&ja(e,n,t);return Na(e,n),e},_e=Pe&&Pe.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(S){try{v(r.next(S))}catch(y){l(y)}}function d(S){try{v(r.throw(S))}catch(y){l(y)}}function v(S){S.done?o(S.value):i(S.value).then(f,d)}v((r=r.apply(n,e||[])).next())})};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ButtplugClientDevice=void 0;var X=Fa(st()),ee=Ct(),$a=Nt(),Ut=class extends $a.EventEmitter{get name(){return this._deviceInfo.DeviceName}get displayName(){return this._deviceInfo.DeviceDisplayName}get index(){return this._deviceInfo.DeviceIndex}get messageTimingGap(){return this._deviceInfo.DeviceMessageTimingGap}get messageAttributes(){return this._deviceInfo.DeviceMessages}static fromMsg(e,t){return new Ut(e,t)}constructor(e,t){super(),this._deviceInfo=e,this._sendClosure=t,this.allowedMsgs=new Map,e.DeviceMessages.update()}send(e){return _e(this,void 0,void 0,function*(){return yield this._sendClosure(this,e)})}sendExpectOk(e){return _e(this,void 0,void 0,function*(){let t=yield this.send(e);switch(t.constructor){case X.Ok:return;case X.Error:throw ee.ButtplugError.FromError(t);default:throw new ee.ButtplugMessageError(`Message type ${t.constructor} not handled by SendMsgExpectOk`)}})}scalar(e){return _e(this,void 0,void 0,function*(){Array.isArray(e)?yield this.sendExpectOk(new X.ScalarCmd(e,this.index)):yield this.sendExpectOk(new X.ScalarCmd([e],this.index))})}scalarCommandBuilder(e,t){var r;return _e(this,void 0,void 0,function*(){let i=(r=this.messageAttributes.ScalarCmd)===null||r===void 0?void 0:r.filter(l=>l.ActuatorType===t);if(!i||i.length===0)throw new ee.ButtplugDeviceError(`Device ${this.name} has no ${t} capabilities`);let o=[];if(typeof e=="number")i.forEach(l=>o.push(new X.ScalarSubcommand(l.Index,e,t)));else if(Array.isArray(e)){if(e.length>i.length)throw new ee.ButtplugDeviceError(`${e.length} commands send to a device with ${i.length} vibrators`);i.forEach((l,f)=>{o.push(new X.ScalarSubcommand(l.Index,e[f],t))})}else throw new ee.ButtplugDeviceError(`${t} can only take numbers or arrays of numbers.`);yield this.scalar(o)})}get vibrateAttributes(){var e,t;return(t=(e=this.messageAttributes.ScalarCmd)===null||e===void 0?void 0:e.filter(r=>r.ActuatorType===X.ActuatorType.Vibrate))!==null&&t!==void 0?t:[]}vibrate(e){return _e(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(e,X.ActuatorType.Vibrate)})}get oscillateAttributes(){var e,t;return(t=(e=this.messageAttributes.ScalarCmd)===null||e===void 0?void 0:e.filter(r=>r.ActuatorType===X.ActuatorType.Oscillate))!==null&&t!==void 0?t:[]}oscillate(e){return _e(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(e,X.ActuatorType.Oscillate)})}get rotateAttributes(){var e;return(e=this.messageAttributes.RotateCmd)!==null&&e!==void 0?e:[]}rotate(e,t){return _e(this,void 0,void 0,function*(){let r=this.messageAttributes.RotateCmd;if(!r||r.length===0)throw new ee.ButtplugDeviceError(`Device ${this.name} has no Rotate capabilities`);let i;if(typeof e=="number")i=X.RotateCmd.Create(this.index,new Array(r.length).fill([e,t]));else if(Array.isArray(e))i=X.RotateCmd.Create(this.index,e);else throw new ee.ButtplugDeviceError("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");yield this.sendExpectOk(i)})}get linearAttributes(){var e;return(e=this.messageAttributes.RotateCmd)!==null&&e!==void 0?e:[]}linear(e,t){return _e(this,void 0,void 0,function*(){let r=this.messageAttributes.LinearCmd;if(!r||r.length===0)throw new ee.ButtplugDeviceError(`Device ${this.name} has no Linear capabilities`);let i;if(typeof e=="number")i=X.LinearCmd.Create(this.index,new Array(r.length).fill([e,t]));else if(Array.isArray(e))i=X.LinearCmd.Create(this.index,e);else throw new ee.ButtplugDeviceError("SendLinearCmd can only take a number and number, or an array of number/number tuples");yield this.sendExpectOk(i)})}sensorRead(e,t){return _e(this,void 0,void 0,function*(){let r=yield this.send(new X.SensorReadCmd(this.index,e,t));switch(r.constructor){case X.SensorReading:return r.Data;case X.Error:throw ee.ButtplugError.FromError(r);default:throw new ee.ButtplugMessageError(`Message type ${r.constructor} not handled by sensorRead`)}})}get hasBattery(){var e;let t=(e=this.messageAttributes.SensorReadCmd)===null||e===void 0?void 0:e.filter(r=>r.SensorType===X.SensorType.Battery);return t!==void 0&&t.length>0}battery(){var e;return _e(this,void 0,void 0,function*(){if(!this.hasBattery)throw new ee.ButtplugDeviceError(`Device ${this.name} has no Battery capabilities`);let t=(e=this.messageAttributes.SensorReadCmd)===null||e===void 0?void 0:e.filter(i=>i.SensorType===X.SensorType.Battery);return(yield this.sensorRead(t[0].Index,X.SensorType.Battery))[0]/100})}get hasRssi(){var e;let t=(e=this.messageAttributes.SensorReadCmd)===null||e===void 0?void 0:e.filter(r=>r.SensorType===X.SensorType.RSSI);return t!==void 0&&t.length===0}rssi(){var e;return _e(this,void 0,void 0,function*(){if(!this.hasRssi)throw new ee.ButtplugDeviceError(`Device ${this.name} has no RSSI capabilities`);let t=(e=this.messageAttributes.SensorReadCmd)===null||e===void 0?void 0:e.filter(i=>i.SensorType===X.SensorType.RSSI);return(yield this.sensorRead(t[0].Index,X.SensorType.RSSI))[0]})}rawRead(e,t,r){return _e(this,void 0,void 0,function*(){if(!this.messageAttributes.RawReadCmd)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw read capabilities`);if(this.messageAttributes.RawReadCmd.Endpoints.indexOf(e)===-1)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw readable endpoint ${e}`);let i=yield this.send(new X.RawReadCmd(this.index,e,t,r));switch(i.constructor){case X.RawReading:return new Uint8Array(i.Data);case X.Error:throw ee.ButtplugError.FromError(i);default:throw new ee.ButtplugMessageError(`Message type ${i.constructor} not handled by rawRead`)}})}rawWrite(e,t,r){return _e(this,void 0,void 0,function*(){if(!this.messageAttributes.RawWriteCmd)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw write capabilities`);if(this.messageAttributes.RawWriteCmd.Endpoints.indexOf(e)===-1)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw writable endpoint ${e}`);yield this.sendExpectOk(new X.RawWriteCmd(this.index,e,t,r))})}rawSubscribe(e){return _e(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw subscribe capabilities`);if(this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(e)===-1)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw subscribable endpoint ${e}`);yield this.sendExpectOk(new X.RawSubscribeCmd(this.index,e))})}rawUnsubscribe(e){return _e(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribe capabilities`);if(this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(e)===-1)throw new ee.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribable endpoint ${e}`);yield this.sendExpectOk(new X.RawUnsubscribeCmd(this.index,e))})}stop(){return _e(this,void 0,void 0,function*(){yield this.sendExpectOk(new X.StopDeviceCmd(this.index))})}emitDisconnected(){this.emit("deviceremoved")}};Pe.ButtplugClientDevice=Ut});var mi=A(qe=>{"use strict";var ka=qe&&qe.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),qa=qe&&qe.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Va=qe&&qe.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&ka(e,n,t);return qa(e,n),e};Object.defineProperty(qe,"__esModule",{value:!0});qe.ButtplugClientConnectorException=void 0;var Ua=Ct(),Ga=Va(st()),gi=class extends Ua.ButtplugError{constructor(e){super(e,Ga.ErrorClass.ERROR_UNKNOWN)}};qe.ButtplugClientConnectorException=gi});var Js=A(Ie=>{"use strict";var Ha=Ie&&Ie.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),za=Ie&&Ie.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Wa=Ie&&Ie.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Ha(e,n,t);return za(e,n),e},Re=Ie&&Ie.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(S){try{v(r.next(S))}catch(y){l(y)}}function d(S){try{v(r.throw(S))}catch(y){l(y)}}function v(S){S.done?o(S.value):i(S.value).then(f,d)}v((r=r.apply(n,e||[])).next())})};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.ButtplugClient=void 0;var Ja=ri(),Ya=Nt(),Ws=hi(),Se=Wa(st()),Xe=Ct(),Xa=mi(),vi=class extends Ya.EventEmitter{constructor(e="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=Ja.ButtplugLogger.Logger,this._isScanning=!1,this.connect=t=>Re(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting using ${t.constructor.name}`),yield t.Connect(),this._connector=t,this._connector.addListener("message",this.parseMessages),this._connector.addListener("disconnect",this.disconnectHandler),yield this.initializeConnection()}),this.disconnect=()=>Re(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.checkConnector(),yield this.shutdownConnection(),yield this._connector.Disconnect()}),this.startScanning=()=>Re(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.sendMsgExpectOk(new Se.StartScanning)}),this.stopScanning=()=>Re(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.sendMsgExpectOk(new Se.StopScanning)}),this.stopAllDevices=()=>Re(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.sendMsgExpectOk(new Se.StopAllDevices)}),this.disconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.parseMessages=t=>{for(let r of t)switch(r.constructor){case Se.DeviceAdded:{let i=r,o=Ws.ButtplugClientDevice.fromMsg(i,this.sendDeviceMessageClosure);this._devices.set(i.DeviceIndex,o),this.emit("deviceadded",o);break}case Se.DeviceRemoved:{let i=r;if(this._devices.has(i.DeviceIndex)){let o=this._devices.get(i.DeviceIndex);o?.emitDisconnected(),this._devices.delete(i.DeviceIndex),this.emit("deviceremoved",o)}break}case Se.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",r);break}},this.initializeConnection=()=>Re(this,void 0,void 0,function*(){this.checkConnector();let t=yield this.sendMessage(new Se.RequestServerInfo(this._clientName,Se.MESSAGE_SPEC_VERSION));switch(t.constructor){case Se.ServerInfo:{let r=t;this._logger.Info(`ButtplugClient: Connected to Server ${r.ServerName}`);let i=r.MaxPingTime;if(r.MessageVersion<Se.MESSAGE_SPEC_VERSION)throw yield this._connector.Disconnect(),Xe.ButtplugError.LogAndError(Xe.ButtplugInitError,this._logger,`Server protocol version ${r.MessageVersion} is older than client protocol version ${Se.MESSAGE_SPEC_VERSION}. Please update server.`);return i>0,yield this.requestDeviceList(),!0}case Se.Error:{yield this._connector.Disconnect();let r=t;throw Xe.ButtplugError.LogAndError(Xe.ButtplugInitError,this._logger,`Cannot connect to server. ${r.ErrorMessage}`)}}return!1}),this.requestDeviceList=()=>Re(this,void 0,void 0,function*(){this.checkConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.sendMessage(new Se.RequestDeviceList)).Devices.forEach(r=>{if(this._devices.has(r.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${r}`);else{let i=Ws.ButtplugClientDevice.fromMsg(r,this.sendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${i}`),this._devices.set(r.DeviceIndex,i),this.emit("deviceadded",i)}})}),this.shutdownConnection=()=>Re(this,void 0,void 0,function*(){yield this.stopAllDevices(),this._pingTimer!==null&&(clearInterval(this._pingTimer),this._pingTimer=null)}),this.sendMsgExpectOk=t=>Re(this,void 0,void 0,function*(){let r=yield this.sendMessage(t);switch(r.constructor){case Se.Ok:return;case Se.Error:throw Xe.ButtplugError.FromError(r);default:throw Xe.ButtplugError.LogAndError(Xe.ButtplugMessageError,this._logger,`Message type ${r.constructor} not handled by SendMsgExpectOk`)}}),this.sendDeviceMessageClosure=(t,r)=>Re(this,void 0,void 0,function*(){return yield this.sendDeviceMessage(t,r)}),this._clientName=e,this._logger.Debug(`ButtplugClient: Client ${e} created.`)}get connected(){return this._connector!==null&&this._connector.Connected}get devices(){this.checkConnector();let e=[];return this._devices.forEach(t=>{e.push(t)}),e}get isScanning(){return this._isScanning}sendDeviceMessage(e,t){return Re(this,void 0,void 0,function*(){if(this.checkConnector(),this._devices.get(e.index)===void 0)throw Xe.ButtplugError.LogAndError(Xe.ButtplugDeviceError,this._logger,`Device ${e.index} not available.`);return t.DeviceIndex=e.index,yield this.sendMessage(t)})}sendMessage(e){return Re(this,void 0,void 0,function*(){return this.checkConnector(),yield this._connector.Send(e)})}checkConnector(){if(!this.connected)throw new Xa.ButtplugClientConnectorException("ButtplugClient not connected")}};Ie.ButtplugClient=vi});var on=A(Ve=>{"use strict";var Ka=Ve&&Ve.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Za=Ve&&Ve.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Qa=Ve&&Ve.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Ka(e,n,t);return Za(e,n),e};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.FromJSON=void 0;var eu=ai(),tu=Qa(st());function ru(n){for(let e of Object.values(tu))if(typeof e=="function"&&"Name"in e&&e.Name===n)return e;return null}function nu(n){let e=JSON.parse(n),t=[];for(let r of Array.from(e)){let i=Object.getOwnPropertyNames(r)[0],o=ru(i);if(o){let l=(0,eu.plainToInstance)(o,r[i]);l.update(),t.push(l)}}return t}Ve.FromJSON=nu});var _i=A(Ue=>{"use strict";var iu=Ue&&Ue.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),su=Ue&&Ue.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),ou=Ue&&Ue.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&iu(e,n,t);return su(e,n),e};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ButtplugMessageSorter=void 0;var Ys=ou(st()),au=Ct(),bi=class{constructor(e){this._useCounter=e,this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(e){this._useCounter&&(e.Id=this._counter,this._counter+=1);let t,r,i=new Promise((o,l)=>{t=o,r=l});return this._waitingMsgs.set(e.Id,[t,r]),i}ParseIncomingMessages(e){let t=[];for(let r of e)if(r.Id!==Ys.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(r.Id)){let[i,o]=this._waitingMsgs.get(r.Id);if(r.Type===Ys.Error){o(au.ButtplugError.FromError(r));continue}i(r);continue}else t.push(r);return t}};Ue.ButtplugMessageSorter=bi});var Ks=A(At=>{"use strict";var an=At&&At.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(S){try{v(r.next(S))}catch(y){l(y)}}function d(S){try{v(r.throw(S))}catch(y){l(y)}}function v(S){S.done?o(S.value):i(S.value).then(f,d)}v((r=r.apply(n,e||[])).next())})};Object.defineProperty(At,"__esModule",{value:!0});At.ButtplugBrowserWebsocketConnector=void 0;var uu=Nt(),Xs=on(),yi=class extends uu.EventEmitter{constructor(e){super(),this._url=e,this._websocketConstructor=null,this.Connect=()=>an(this,void 0,void 0,function*(){var t;let r=new((t=this._websocketConstructor)!==null&&t!==void 0?t:WebSocket)(this._url),i,o,l=new Promise((d,v)=>{i=d,o=v}),f=()=>o();return r.addEventListener("open",()=>an(this,void 0,void 0,function*(){this._ws=r;try{yield this.Initialize(),this._ws.addEventListener("message",d=>{this.ParseIncomingMessage(d)}),this._ws.removeEventListener("close",f),this._ws.addEventListener("close",this.Disconnect),i()}catch(d){console.log(d),o()}})),r.addEventListener("close",f),l}),this.Disconnect=()=>an(this,void 0,void 0,function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))}),this.Initialize=()=>an(this,void 0,void 0,function*(){return Promise.resolve()})}get Connected(){return this._ws!==void 0}SendMessage(e){if(!this.Connected)throw new Error("ButtplugBrowserWebsocketConnector not connected");this._ws.send("["+e.toJSON()+"]")}ParseIncomingMessage(e){if(typeof e.data=="string"){let t=(0,Xs.FromJSON)(e.data);this.emit("message",t)}else e.data instanceof Blob}OnReaderLoad(e){let t=(0,Xs.FromJSON)(e.target.result);this.emit("message",t)}};At.ButtplugBrowserWebsocketConnector=yi});var Mi=A(Dt=>{"use strict";var lu=Dt&&Dt.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(S){try{v(r.next(S))}catch(y){l(y)}}function d(S){try{v(r.throw(S))}catch(y){l(y)}}function v(S){S.done?o(S.value):i(S.value).then(f,d)}v((r=r.apply(n,e||[])).next())})};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ButtplugBrowserWebsocketClientConnector=void 0;var Zs=on(),cu=_i(),du=Ks(),Si=class extends du.ButtplugBrowserWebsocketConnector{constructor(){super(...arguments),this._sorter=new cu.ButtplugMessageSorter(!0),this.Send=e=>lu(this,void 0,void 0,function*(){if(!this.Connected)throw new Error("ButtplugClient not connected");let t=this._sorter.PrepareOutgoingMessage(e);return this.SendMessage(e),yield t}),this.ParseIncomingMessage=e=>{if(typeof e.data=="string"){let t=(0,Zs.FromJSON)(e.data),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}else e.data instanceof Blob}}OnReaderLoad(e){let t=(0,Zs.FromJSON)(e.target.result),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}};Dt.ButtplugBrowserWebsocketClientConnector=Si});var eo=A((vl,Qs)=>{"use strict";Qs.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var to=A(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.ButtplugNodeWebsocketClientConnector=void 0;var fu=Mi(),pu=eo(),wi=class extends fu.ButtplugBrowserWebsocketClientConnector{constructor(){super(...arguments),this._websocketConstructor=pu.WebSocket}};un.ButtplugNodeWebsocketClientConnector=wi});var no=A(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0})});var io=A(me=>{"use strict";var hu=me&&me.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ne=me&&me.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hu(e,n,t)};Object.defineProperty(me,"__esModule",{value:!0});Ne(Js(),me);Ne(hi(),me);Ne(Mi(),me);Ne(to(),me);Ne(mi(),me);Ne(_i(),me);Ne(no(),me);Ne(st(),me);Ne(on(),me);Ne(ri(),me);Ne(Ct(),me)});var so=A(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.roundAction=Ke.getSpeed=Ke.getActionGroups=void 0;var gu=function(n){var e=[],t=-1,r=-1;return n.forEach(function(i,o){if(o===0){e.push([i]),t++;return}if(o===1){e[t].push(i),r=Math.max(250,i.at-n[o-1].at);return}var l=i.at-n[o-1].at;l>5*r?(e.push([i]),t++):e[t].push(i),r=Math.max(250,l)}),e};Ke.getActionGroups=gu;var mu=function(n,e){if(!n||!e||n.at===e.at)return 0;try{if(e.at<n.at){var t=e;e=n,n=t}return 1e3*(Math.abs(e.pos-n.pos)/Math.abs(e.at-n.at))}catch(r){return console.error("Failed on actions",n,e,r),0}};Ke.getSpeed=mu;var vu=function(n){var e={at:Math.max(0,Math.round(n.at)),pos:Math.max(0,Math.min(100,Math.round(n.pos)))};return n.subActions&&(e.subActions=n.subActions.map(function(t){return Ke.roundAction(t)})),n.type&&(e.type=n.type),e};Ke.roundAction=vu});var oo=A(Fe=>{"use strict";var zt=Fe&&Fe.__assign||function(){return zt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zt.apply(this,arguments)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.convertFunscriptToCsv=Fe.addFunscriptMetadata=Fe.getFunscriptFromString=void 0;var Ei=so(),bu=function(n){var e=JSON.parse(n);return Fe.addFunscriptMetadata(e)};Fe.getFunscriptFromString=bu;var _u=function(n){var e=zt({},n);e.actions=e.actions.sort(function(i,o){return i.at-o.at}).map(Ei.roundAction);var t=e.actions.slice(-1)[0].at,r=e.actions.reduce(function(i,o,l){if(l===0)return i;var f=Ei.getSpeed(e.actions[l-1],e.actions[l]);return i+f},0)/(e.actions.length-1);return e.metadata=zt(zt({},e.metadata),{duration:t,average_speed:r}),e};Fe.addFunscriptMetadata=_u;var yu=function(n){var e=JSON.parse(n),t=e.actions.map(function(i){var o=Ei.roundAction(i);return o.at+","+o.pos}).join(`
`),r=new Blob([t],{type:"text/plain"});return r};Fe.convertFunscriptToCsv=yu});var at=Xi(io(),1),ln=class{_client=new at.ButtplugClient("ButtplugOperator");_deviceRefleshedEvents=[];Devices={Viberators:[],Rotators:[],Linears:[]};constructor(){console.log("buttplugOperator constructed."),this._client.addListener("deviceadded",async e=>{console.log(`device added: ${e.name}`),this.ParseDeviceList()}),this._client.addListener("deviceremoved",e=>{console.log(`device removed: ${e.name}`),this.ParseDeviceList()})}async connectToServer(e){let t=new at.ButtplugBrowserWebsocketClientConnector(e);try{await this._client.connect(t)}catch(r){return console.log(`${r}`),r instanceof at.ButtplugError&&(console.log("this is a buttplug error"),r instanceof at.ButtplugClientConnectorException?console.log("This is a connector error"):console.log("Was another type of error")),!1}return!0}AddDevicesRefleshedEvents(e){this._deviceRefleshedEvents.push(e)}ParseDeviceList(){this.Devices.Viberators.splice(0),this.Devices.Rotators.splice(0),this.Devices.Linears.splice(0);for(let e of this._client.devices){e.vibrateAttributes.length>0?(this.Devices.Viberators.push(e),e.vibrate(.5),setTimeout(()=>{e.stop()},600)):e.rotateAttributes.length>0?(this.Devices.Rotators.push(e),e.rotate(.5,!0),setTimeout(()=>{e.stop()},600)):e.messageAttributes.LinearCmd&&(this.Devices.Linears.push(e),e.linear(0,1e3),setTimeout(()=>{e.linear(.5,1e3)},1e3),setTimeout(()=>{e.linear(0,1e3)},2e3)),console.log("Viberators:");for(let t of this.Devices.Viberators)console.log("  "+t.name);console.log("Rotators:");for(let t of this.Devices.Rotators)console.log("  "+t.name);console.log("Linears:");for(let t of this.Devices.Linears)console.log("  "+t.name)}for(let e of this._deviceRefleshedEvents)e()}StopAllDevices(){for(let e of this.Devices.Viberators)e.stop();for(let e of this.Devices.Rotators)e.stop();for(let e of this.Devices.Linears)e.stop()}SendViberateMsg(e){this.Devices.Viberators.forEach(t=>{t.vibrate(e)})}SendRotateMsg(e,t){this.Devices.Rotators.forEach(r=>{r.rotate(e,t)})}SendLinearMsg(e,t){this.Devices.Linears.forEach(r=>{r.linear(e,t)})}async ConnectDevice(){this._client.connected?await this._client.startScanning():console.log("buttplug client is not connected.")}};var Gt;(d=>{class n{Milliseconds=0;Power=0;constructor(S,y){this.Milliseconds=S,y<0?this.Power=0:y>1e3?this.Power=1e3:this.Power=y}get ButtPower(){return this.Power/1e3}get Seconds(){return Math.trunc(this.Milliseconds/1e3)}get HHMMSS(){let S=Math.floor(this.Milliseconds/1e3),y=Math.floor(S/60),V=Math.floor(y/60),D=String(S%60).padStart(2,"0"),J=String(y%60).padStart(2,"0");return`${String(V).padStart(2,"0")}:${J}:${D}`}toString(){return`Time: ${this.Milliseconds}, Power: ${this.ButtPower}`}}d.ScriptLine=n;let e=/^([0-9]+)(\.[0-9]{1,2})?,(1000|[0-9]+)$/;function t(v){let y=v.replace(/\r\n|\r/g,`
`).split(/\n/);y.slice(-1)[0]===""&&y.pop();let V=!0;for(let D=0;D<y.length;D++)if(!y[D].match(e)){V=!1;break}return V}d.Validate=t;function r(v){let y=v.replace(/\r\n|\r/g,`
`).split(/\n/),V=[];return y.forEach(D=>{let J=D.match(e);if(J){let ae=Number(J[1])*1e3;if(J[2]){let P=J[2].replace(".",""),U;P.length==1?U=Number(P)*10:U=Number(P),ae+=U*10}let Ge=Number(J[3]),He=new n(ae,Ge);V.push(He)}}),console.log("script start time: "+V[0].HHMMSS),V}d.RawScriptToLines=r;function i(v){let S=[];return v.forEach(V=>{let D=V.Seconds;S[D]||(S[D]=[]),S[D].push(V)}),S}d.SplitLines=i;function o(v){let S=r(v);return i(S)}d.LoadScript=o;let l=[new n(500,800),new n(600,0),new n(1500,400),new n(1600,0),new n(2500,800),new n(2600,0),new n(3500,400),new n(3600,0),new n(4500,800),new n(4600,0),new n(5500,400),new n(5600,0),new n(6500,800),new n(6600,0),new n(7500,400),new n(7600,0)];d.TestScript=i(l)})(Gt||={});var Ht;(o=>{class n{Milliseconds=0;Clockwise=!0;Power=0;get ButtPower(){return this.Power/100}get Seconds(){return Math.trunc(this.Milliseconds/1e3)}get HHMMSS(){let f=Math.floor(this.Milliseconds/1e3),d=Math.floor(f/60),v=Math.floor(d/60),S=String(f%60).padStart(2,"0"),y=String(d%60).padStart(2,"0");return`${String(v).padStart(2,"0")}:${y}:${S}`}constructor(f,d,v){this.Milliseconds=f,this.Clockwise=d,v<0?this.Power=0:v>100?this.Power=100:this.Power=v}toString(){return`Time: ${this.Milliseconds}, Clockwise: ${this.Clockwise} Power: ${this.ButtPower}`}}o.ScriptLine=n;let e=/^([0-9]+),(0|1),(100|[0-9]{1,2})$/;function t(l){let d=l.replace(/\r\n|\r/g,`
`).split(/\n/);d.slice(-1)[0]===""&&d.pop();let v=!0;for(let S=0;S<d.length;S++)if(!d[S].match(e)){v=!1;break}return v}o.Validate=t;function r(l){let d=l.replace(/\r\n|\r/g,`
`).split(/\n/),v=[];return d.forEach(S=>{let y=S.match(e);if(y){let V=Number(y[1])*100,D=y[2]==="1",J=Number(y[3]),ae=new n(V,D,J);v.push(ae)}}),console.log("script start time: "+v[0].HHMMSS),v}o.RawScriptToLines=r;function i(l){let f=[];return l.forEach(v=>{let S=v.Seconds;f[S]||(f[S]=[]),f[S].push(v)}),f}o.SplitLines=i})(Ht||={});var Ti=Xi(oo(),1),cn=class{Title;Origin;Ranged;Splitted;get OriginMin(){return this.getMin(this.Origin)}get OriginMax(){return this.getMax(this.Origin)}get RangedMin(){return this.getMin(this.Ranged)}get RangedMax(){return this.getMax(this.Ranged)}constructor(e,t){this.Title=e;let r=(0,Ti.getFunscriptFromString)(t),i=this.ConvertJsonToScript(r);console.log("funscript loaded. lines: "+i.length),console.log("script start time: "+i[0].HHMMSS),this.Origin=i,this.Ranged=i,this.Splitted=this.splitLines(i)}ConvertJsonToScript(e){let t=e.actions,r=[],i=0;for(let o of t){let l=o.at-i;r.push(new dn(i,o.pos,l)),i=o.at}return r}SetRange(e,t){let r=[];for(let i of this.Origin){let o=this.normalize(i.Position,this.OriginMin,this.OriginMax,e,t),l=new dn(i.Milliseconds,o,i.Duration);r.push(l)}this.Ranged=r,this.Splitted=this.splitLines(r);for(let i=0;i<10;i++)console.log(this.Ranged[i]);console.log("newmin: "+this.getMin(this.Ranged)),console.log("newmax: "+this.getMax(this.Ranged)),console.log("splitted.length: "+this.Splitted.length)}Validate(e){try{let t=(0,Ti.getFunscriptFromString)(e);return!0}catch{return console.log("Loading funscript is failed."),!1}}getMin(e){let t=e.map(i=>i.Position),r=(i,o)=>Math.min(i,o);return t.reduce(r)}getMax(e){let t=e.map(i=>i.Position),r=(i,o)=>Math.max(i,o);return t.reduce(r)}splitLines(e){let t=[];for(let i of e){let o=i.Seconds;t[o]||(t[o]=[]),t[o].push(i)}return t}normalize(e,t,r,i,o){if(t>r)throw new RangeError("oldMin is greater than oldMax.");if(i>o)throw new RangeError("newMin is greater than newMax.");e>r&&(e=r),e<t&&(e=t);let l=r-t,f=o-i;return(e-t)*f/l+i}},dn=class{Milliseconds=0;Position=0;Duration=0;get Seconds(){return Math.trunc(this.Milliseconds/1e3)}get ButtPosition(){return this.Position/100}get HHMMSS(){let e=this.Seconds,t=Math.floor(e/60),r=Math.floor(t/60),i=String(e%60).padStart(2,"0"),o=String(t%60).padStart(2,"0");return`${String(r).padStart(2,"0")}:${o}:${i}`}constructor(e,t,r){this.Milliseconds=e,this.Duration=r,t<0?this.Position=0:t>100?this.Position=100:this.Position=t}toString(){return`Time: ${this.Milliseconds}, Positon: ${this.Position}, Duration: ${this.Duration}`}};var fn=class{_buttplugOperator;_previousSeconds=0;_timerIDs=new Set;Offset=0;Scripts={TimeRoter:void 0,Vorze_SA:void 0,Funscript:void 0};constructor(e){this._buttplugOperator=e}GetFileName(e){return e.match(/[a-zA-Z]:\\/)?e.split("\\").reverse()[0]:e.split("/").reverse()[0]}LoadScript(e,t){if(console.log("path: "+t),t.endsWith(".funscript"))return this.Scripts.Funscript=new cn(this.GetFileName(t),e),!0;if(Gt.Validate(e)){let r=Gt.RawScriptToLines(e);return this.Scripts.TimeRoter={Script:r,Splitted:Gt.SplitLines(r),Title:this.GetFileName(t)},console.log("timeroter script loaded. lines: "+r.length),!0}else if(Ht.Validate(e)){let r=Ht.RawScriptToLines(e);return this.Scripts.Vorze_SA={Script:r,Splitted:Ht.SplitLines(r),Title:this.GetFileName(t)},console.log("Vorze_SA script loaded. lines: "+r.length),!0}else return!1}Play(e){let t=Math.trunc(e);this._previousSeconds=t-2,this.OperateTimeRoterScript(t-1),this.OperateVorzeSAScript(t-1),this.OperateFunscript(t-1),this._previousSeconds=t}Stop(){this._previousSeconds=0,this._buttplugOperator.Devices.Viberators.forEach(e=>{e.stop()}),this._buttplugOperator.Devices.Rotators.forEach(e=>{e.stop()}),this._buttplugOperator.Devices.Linears.forEach(e=>{e.stop()}),this._timerIDs.forEach(e=>{clearTimeout(e)}),this._timerIDs.clear()}TimeUpdate(e){let t=e+this.Offset,r=Math.trunc(t);r!==this._previousSeconds&&(this.OperateTimeRoterScript(t),this.OperateVorzeSAScript(t),this.OperateFunscript(t),this._previousSeconds=r)}SetFunscriptRange(e,t){this.Scripts.Funscript?.SetRange(e,t)}OperateTimeRoterScript(e){if(!this.Scripts.TimeRoter)return;let t=Math.trunc(e),r=this.Scripts.TimeRoter.Splitted;this._buttplugOperator.Devices.Viberators.length>0&&t!==this._previousSeconds&&r[t+1]&&r[t+1].forEach(i=>{let o=i.Milliseconds-Math.trunc(e*1e3),l=`send ViberateMsg: ${i.toString()}`;setTimeout(()=>console.log(l),o);let f=window.setTimeout(()=>{this._buttplugOperator.SendViberateMsg(i.ButtPower)},o);this._timerIDs.add(f),setTimeout(()=>{this._timerIDs.delete(f)},3e3)})}OperateVorzeSAScript(e){if(!this.Scripts.Vorze_SA)return;let t=Math.trunc(e),r=this.Scripts.Vorze_SA.Splitted;this._buttplugOperator.Devices.Rotators.length>0&&t!==this._previousSeconds&&r[t+1]&&r[t+1].forEach(i=>{let o=i.Milliseconds-Math.trunc(e*1e3),l=`send RotateMsg: ${i.toString()}`;setTimeout(()=>console.log(l),o);let f=window.setTimeout(()=>{this._buttplugOperator.SendRotateMsg(i.ButtPower,i.Clockwise)},o);this._timerIDs.add(f),setTimeout(()=>{this._timerIDs.delete(f)},3e3)})}OperateFunscript(e){if(!this.Scripts.Funscript)return;let t=Math.trunc(e),r=e*1e3,i=this.Scripts.Funscript.Splitted;this._buttplugOperator.Devices.Linears.length>0&&t!==this._previousSeconds&&i[t+1]&&i[t+1].forEach(o=>{let l=o.Milliseconds-r,f=`send LinearMsg: ${o.toString()}`;setTimeout(()=>console.log(f),l);let d=window.setTimeout(()=>{this._buttplugOperator.SendLinearMsg(o.ButtPosition,o.Duration)},l);this._timerIDs.add(d),setTimeout(()=>{this._timerIDs.delete(d)},3e3)})}};var pn=class{Elem;constructor(e){this.Elem=e}AppendToList(e,t){let r=document.createElement("li"),i=document.createElement("span");return i.className="name",i.innerText=t,r.appendChild(i),e.appendChild(r),r}AppendVibDeviceList(e){this.AppendToList(this.Elem.VibDeviceList,e)}AppendRotatorDeviceList(e){this.AppendToList(this.Elem.RotatorDeviceList,e)}AppendLinearDeviceList(e){this.AppendToList(this.Elem.LinearDeviceList,e)}AppendTimeRoterScriptList(e){this.AppendToList(this.Elem.TimeRoterScriptList,e)}AppendVorzeSAScriptList(e){this.AppendToList(this.Elem.VorzeSAScriptList,e)}AppendFunscriptList(e){let t=this.AppendToList(this.Elem.FunscriptList,e),r=document.createElement("slider-container");t.appendChild(r),r.InitializeSlider(),this.Elem.FunscriptSlider=r}ClearDeviceLists(){this.Elem.VibDeviceList.innerHTML="",this.Elem.RotatorDeviceList.innerHTML="",this.Elem.LinearDeviceList.innerHTML=""}ClearScriptLists(){this.Elem.TimeRoterScriptList.innerHTML="",this.Elem.VorzeSAScriptList.innerHTML="",this.Elem.FunscriptList.innerHTML=""}AddFunscriptSliderUpdateEvent(e){let t=this.Elem.FunscriptSlider;t?.addEventListener("mouseup",()=>{e(t.range_min,t.range_max)})}};var hn=class{ButtplugOperator;ScriptOperator;UI;constructor(){this.ButtplugOperator=new ln,this.ScriptOperator=new fn(this.ButtplugOperator);let e={Player:document.getElementById("player"),VibDeviceList:document.getElementById("VibDeviceList"),RotatorDeviceList:document.getElementById("RotatorDeviceList"),LinearDeviceList:document.getElementById("LinearDeviceList"),TimeRoterScriptList:document.getElementById("TimeRoterScriptList"),VorzeSAScriptList:document.getElementById("VorzeSAScriptList"),FunscriptList:document.getElementById("FunscriptList"),FunscriptSlider:void 0};this.UI=new pn(e),this.addEvent()}RefleshDeviceLists(){let e=this.UI;e.ClearDeviceLists();for(let t of this.ButtplugOperator.Devices.Viberators)e.AppendVibDeviceList(t.name);for(let t of this.ButtplugOperator.Devices.Rotators)e.AppendRotatorDeviceList(t.name);for(let t of this.ButtplugOperator.Devices.Linears)e.AppendLinearDeviceList(t.name)}RefleshScriptLists(){let e=this.UI;e.ClearScriptLists();let t=this.ScriptOperator.Scripts.TimeRoter,r=this.ScriptOperator.Scripts.Vorze_SA,i=this.ScriptOperator.Scripts.Funscript;t&&e.AppendTimeRoterScriptList(t.Title),r&&e.AppendVorzeSAScriptList(r.Title),i&&(e.AppendFunscriptList(i.Title),e.Elem.FunscriptSlider.range_min=i.RangedMin,e.Elem.FunscriptSlider.range_max=i.RangedMax,e.Elem.FunscriptSlider.addEventListener("mouseup",()=>{let o=e.Elem.FunscriptSlider.range_min,l=e.Elem.FunscriptSlider.range_max;i.SetRange(o,l)}))}addEvent(){console.log("addEvent() called.");let e=this.UI,t=()=>this.ScriptOperator;e.Elem.Player.addEventListener("timeupdate",()=>{e.Elem.Player.paused||this.ScriptOperator.TimeUpdate(e.Elem.Player.currentTime)}),e.Elem.Player.addEventListener("pause",()=>this.ScriptOperator.Stop()),e.Elem.Player.addEventListener("ended",()=>this.ScriptOperator.Stop());let r=document.getElementById("scriptInput");r.addEventListener("input",l=>{let f=r.files[0],d=r.value;if(f!=null){let v=new FileReader;v.readAsText(f),v.onload=()=>{v.result&&this.ScriptOperator.LoadScript(v.result,d)&&this.RefleshScriptLists()},v.onerror=()=>{console.log(v.error)}}}),document.getElementById("scriptButton").addEventListener("click",l=>{r?.click()});let i=document.getElementById("mediaInput");i.addEventListener("input",()=>{let l=i.files;l&&(l[0].type.startsWith("video/")?(e.Elem.Player.src=URL.createObjectURL(l[0]),e.Elem.Player.style.height="auto"):l[0].type.startsWith("audio/")&&(e.Elem.Player.src=URL.createObjectURL(l[0]),e.Elem.Player.style.height="3em")),i.files=null}),document.getElementById("mediaButton")?.addEventListener("click",()=>{i.click()});let o=document.getElementById("offset");o?.addEventListener("change",l=>{this.ScriptOperator.Offset=Number(o.value)}),document.getElementById("connectButton").addEventListener("click",async()=>{await this.ButtplugOperator.ConnectDevice()}),document.getElementById("connectServer").addEventListener("click",async()=>{let l=document.getElementById("serverURL"),f=await this.ButtplugOperator.connectToServer("ws://"+l.value),d=document.getElementById("connectStatus");f?d.innerText="\u63A5\u7D9A\u4E2D: "+l.value:d.innerText="\u63A5\u7D9A\u5931\u6557"}),this.ButtplugOperator.AddDevicesRefleshedEvents(()=>this.RefleshDeviceLists())}};(()=>{var n=Object.defineProperty,e=Math.pow,t=(s,u,m)=>u in s?n(s,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):s[u]=m,r=(s,u,m)=>(t(s,typeof u!="symbol"?u+"":u,m),m),i=(s,u)=>` ${u&&u.length>0?u.map(m=>`<link rel="stylesheet" href="${m}" />`).join(""):""} <style> ${s} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,o=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",l="pointers-overlap",f="pointers-min-distance",d="pointers-max-distance",v="range-dragging",S="data",y="min",V="max",D="step",J="round",ae="type",Ge="theme",He="rtl",P="btt",U="disabled",ut="keyboard-disabled",Ze="mousewheel-disabled",mn="slider-width",vn="slider-height",bn="slider-radius",_n="slider-bg",yn="slider-bg-hover",Sn="slider-bg-fill",lt="pointer-width",Wt="pointer-height",xt="pointer-radius",Jt="pointer-bg",Yt="pointer-bg-hover",Xt="pointer-bg-focus",Kt="pointer-shadow",Zt="pointer-shadow-hover",Qt="pointer-shadow-focus",te="pointer-border",Qe="pointer-border-hover",Mn="pointer-border-focus",re="animate-onclick",wn="css-links",Ce="vertical",et="horizontal",Pt=(s,u,m,p,w)=>{let R=u-s;return R===0?m:(p-m)*(w-s)/R+m},ce=s=>!isNaN(parseFloat(s))&&isFinite(s),Q=(s,u)=>ce(s)?Number(s):u,ze=(s,u)=>u===0?0:Math.round(s/u)*u,er=(s,u=1/0)=>{if(u===1/0)return s;let m=e(10,u);return Math.round(s*m)/m},de=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true",tr=(s,u)=>{s.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:u}}))},En=(s,u)=>{s.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:u}}))},Tn=(s,u)=>{s.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:u}}))},On=(s,u)=>{s.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:u}}))},Ln=(s,u)=>{if(!u||u.length<=0)return;let m=u.map(w=>ce(w)?Q(w,w):w),p={values:m||[]};p.value=m[0],p.value0=m[0],p.value1=m[0];for(let w=1;w<m.length;w++)p[`value${w+1}`]=m[w];s.dispatchEvent(new CustomEvent("change",{detail:p}))},ct=(s,u,m)=>{let p=0,w,R,F,E,T=!1,$=(B,Z,ge,pe,ne,ie)=>{let Me=p;ge!==void 0&&B>ge&&(B=ge),Z!==void 0&&B<Z&&(B=Z),p=B;let we=p;return(pe===Ce&&ie||pe===et&&ne)&&(we=100-we),pe===Ce?u.style.top=`${we}%`:u.style.left=`${we}%`,Me!==p},q=B=>B===u||u.contains(B),x=(B,Z,ge,pe)=>{w=B,R=Z,F=ge,E=pe},Y=B=>{T=B,u.classList.toggle("disabled",T),T?u.setAttribute("aria-disabled","true"):u.hasAttribute("aria-disabled")&&u.removeAttribute("aria-disabled")},xe=(B,Z)=>{Z==null?u.removeAttribute(B):u.setAttribute(B,Z)},ve=B=>u.getAttribute(B),I=B=>{if(!T){switch(B.key){case"ArrowLeft":{B.preventDefault(),typeof w=="function"&&w(m);break}case"ArrowRight":{B.preventDefault(),typeof R=="function"&&R(m);break}case"ArrowUp":{B.preventDefault(),typeof F=="function"&&F(m);break}case"ArrowDown":{B.preventDefault(),typeof E=="function"&&E(m);break}}On(s,B)}},k=()=>{T||tr(s,u)};return u.className=`pointer pointer-${m}`,u.addEventListener("keydown",I),u.addEventListener("click",k),{$pointer:u,get percent(){return p},get disabled(){return T},set disabled(B){Y(B)},updatePosition:$,isClicked:q,setCallbacks:x,setAttr:xe,getAttr:ve,destroy:()=>{u.removeEventListener("keydown",I),u.removeEventListener("click",k),u.remove()}}},Cn=s=>{if(s==null)return;if(Array.isArray(s))return s;if(s.trim()==="")return;let u=s.split(","),m=[],p=!0;for(let w=0;w<u.length;w++){let R=u[w].trim();R!==""&&(m.push(R),ce(R)||(p=!1))}return p?m.map(w=>Number(w)):m},An=(s,u)=>u?u.findIndex(m=>m===s||m.toString().trim()===s.toString().trim()):-1,Dn=s=>({updatePosition:(u,m,p,w)=>{if(m.length<=0)return;let R=m.length===1,F=m[0],E=m[m.length-1];u===Ce?(s.style.removeProperty("width"),s.style.removeProperty("right"),s.style.removeProperty("left"),R?s.style.height=`${F}%`:s.style.height=`${Math.abs(F-E)}%`,w?(s.style.bottom="0%",R?s.style.top="auto":s.style.top=`${Math.min(100-E,100-F)}%`):(s.style.bottom="auto",R?s.style.top="0%":s.style.top=`${Math.min(F,E)}%`)):(s.style.removeProperty("height"),s.style.removeProperty("top"),s.style.removeProperty("bottom"),R?s.style.width=`${F}%`:s.style.width=`${Math.abs(F-E)}%`,p?(s.style.right="0%",R?s.style.left="auto":s.style.left=`${Math.min(100-E,100-F)}%`):(s.style.right="auto",R?s.style.left="0%":s.style.left=`${Math.min(F,E)}%`))}}),mt="--animate-onclick",c="--width",h="--height",_="--panel-bg-border-radius",M="--panel-bg",L="--panel-bg-hover",fe="--panel-bg-fill",j="--pointer-width",N="--pointer-height",C="--pointer-border-radius",G="--pointer-bg",H="--pointer-bg-hover",$e="--pointer-bg-focus",rr="--pointer-shadow",ao="--pointer-shadow-hover",uo="--pointer-shadow-focus",lo="--pointer-border",co="--pointer-border-hover",fo="--pointer-border-focus",nr=(s,u,m)=>{let p=new Map;for(let w of s.attributes){let R=w.nodeName.trim().toLowerCase();if(!u.test(R))continue;let F=R.replace(/\D/g,"").trim(),E=F===""||F==="0"||F==="1"?0:Q(F,0)-1,T=m&&typeof m=="function"?m(w.value):w.value;p.set(E,T)}return p},po=s=>{if(!s)return null;let u=s.getAttribute(wn);if(!u)return null;let m=u.split(";"),p=[];for(let w of m)w.trim()!==""&&p.push(w.trim());return p},Oi=[[c,mn,"sliderWidth",null],[h,vn,"sliderHeight",null],[_,bn,"sliderRadius",null],[M,_n,"sliderBg",null],[L,yn,"sliderBgHover",null],[fe,Sn,"sliderBgFill",null],[j,lt,"pointer#Width",/^pointer([0-9]*)-width$/],[N,Wt,"pointer#Height",/^pointer([0-9]*)-height$/],[C,xt,"pointer#Radius",/^pointer([0-9]*)-radius$/],[G,Jt,"pointer#Bg",/^pointer([0-9]*)-bg$/],[H,Yt,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[$e,Xt,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[rr,Kt,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[ao,Zt,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[uo,Qt,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[lo,te,"pointer#Border",/^pointer([0-9]*)-border$/],[co,Qe,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[fo,Mn,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],ho=(s,u,m)=>{let p=null,w=[],R=new Map,F=(I,k=u)=>{let B=[...k.classList];for(let Z of B)Z.startsWith(I)&&u.classList.remove(Z)},E=()=>{F("shape");let I=u.querySelectorAll(".pointer");for(let k of I)F("shape",k)},T=I=>{p=I,F("theme-"),typeof I=="string"&&u.classList.add(`theme-${I}`)},$=()=>{if(E(),!(w.length<=0)){u.classList.add("shape",`shape-${w[0]}`);for(let I=1;I<w.length;I++){let k=w[I];if(!k)continue;let B=u.querySelector(`.pointer-${I}`);!B||B.classList.add("shape",`shape-${k}`)}}},q=(I,k)=>{w[I]=k,$()},x=()=>{E();let I=nr(s,/^pointer([0-9]*)-shape$/);if(!(I.size<=0)){for(let k of I){let B=k[0];w[B]=k[1]}$()}},Y=(I,k)=>`${I}-${k}`,xe=(I,k,B)=>{let Z=m[B];if(!Z)return;let ge=B===0?u:Z.$pointer;if(k==null){R.has(Y(I,B))&&R.delete(Y(I,B)),ge.style.removeProperty(I);return}R.set(Y(I,B),k),ge.style.setProperty(I,k)},ve=(I,k)=>R.get(Y(I,k));return(()=>{for(let I of Oi){let[k,B,Z,ge]=I;if(ge){let ne=nr(s,ge);for(let ie of ne){let Me=ie[0],we=ie[1];xe(k,we,Me)}}else{let ne=s.getAttribute(B);xe(k,ne,0)}let pe=[];if(Z.indexOf("#")===-1)pe.push([Z,0]);else{pe.push([Z.replace("#",""),0]),pe.push([Z.replace("#","0"),0]),pe.push([Z.replace("#","1"),0]);for(let ne=1;ne<m.length;ne++)pe.push([Z.replace("#",(ne+1).toString()),ne])}for(let ne of pe)try{let ie=ne[0],Me=ne[1];Object.prototype.hasOwnProperty.call(s,ie)||Object.defineProperty(s,ie,{get(){return ve(k,Me)},set:we=>{xe(k,we,Me)}})}catch(ie){console.error(ie)}}T(s.getAttribute(Ge)),x()})(),{setStyle:xe,getStyle:ve,get theme(){return p},set theme(I){T(I)},get pointerShapes(){return w},setPointerShape:q}},vt="animate-on-click",Li="range-dragging",go=(s,u,m,p)=>{let w=[],R=q=>{for(let x of w)x.update&&typeof x.update=="function"&&x.update(q)},F=()=>{for(let q of w)q.destroy&&typeof q.destroy=="function"&&q.destroy()},E=(q,x)=>{for(let Y of w)Y.onAttrChange&&typeof Y.onAttrChange=="function"&&Y.onAttrChange(q,x)},T=q=>{if(q.gettersAndSetters){for(let x of q.gettersAndSetters)if(!(!x.name||!x.attributes))try{Object.prototype.hasOwnProperty.call(s,x.name)||Object.defineProperty(s,x.name,x.attributes)}catch(Y){console.error("defineSettersGetters error:",Y)}}},$=q=>{var x;if(!q.css)return;let Y=(x=s.shadowRoot)==null?void 0:x.querySelector("style");!Y||(Y.innerHTML+=q.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let q of window.tcRangeSliderPlugins){let x=q();w.push(x),x.init&&typeof x.init=="function"&&(x.init(s,u,m,p),T(x),$(x))}},update:R,onAttrChange:E,destroy:F}},mo=10,Ci=20,vo=(s,u)=>{let m=new Map,p=/^value([0-9]*)$/;for(let E of s.attributes){let T=E.nodeName.trim().toLowerCase();if(!p.test(T))continue;let $=T.replace("value","").trim(),q=$===""||$==="0"||$==="1"?0:Q($,0)-1,x=ce(E.value)?Q(E.value,0):E.value;m.set(q,x)}let w=Math.max(...Array.from(m.keys())),R=[];R.push([ct(s,u,0),m.get(0)]);let F=u;for(let E=1;E<=w;E++){let T=u.cloneNode(!0);F.after(T),F=T,R.push([ct(s,T,E),m.get(E)])}return R},Ai=(s,u,m,p,w,R,F)=>{try{Object.defineProperty(s,p,{configurable:!0,get(){if(!u)return;let E=u.pointers[m];if(!E)return;let T=u.getTextValue(E.percent);return ce(T)?Q(T,T):T},set:E=>{u.pointers[m]?u?.setValue(E,m):u?.addPointer(E)}}),Object.defineProperty(s,w,{configurable:!0,get(){var E,T;return(T=(E=u?.pointers[m])==null?void 0:E.getAttr("aria-label"))!=null?T:void 0},set:E=>{!u||u.setAriaLabel(m,E)}}),Object.defineProperty(s,R,{configurable:!0,get(){var E,T;return(T=(E=u?.styles)==null?void 0:E.pointerShapes[m])!=null?T:null},set:E=>{!u||!u.styles||u.styles.setPointerShape(m,E)}}),Object.defineProperty(s,F,{configurable:!0,get(){var E;return(E=u?.pointers[m].disabled)!=null?E:!1},set:E=>{if(!u)return;let T=u?.pointers[m];!T||(T.disabled=E)}})}catch(E){console.error(E)}},bo=(s,u)=>{let m=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let p=2;p<mo;p++)m.push([`value${p}`,`ariaLabel${p}`,`pointer${p}Shape`,`pointer${p}Disabled`,p-1]);for(let p of m)Ai(s,u,p[4],p[0],p[1],p[2],p[3])},Di=(s,u,m)=>{var p;let w=(p=m.shadowRoot)==null?void 0:p.querySelector(".container");if(w)for(let R of s)u?w.prepend(R.$pointer):w.append(R.$pointer)},_o=(s,u)=>{if(!(!u||s.length<=1)){for(let m of s)m.$pointer.style.zIndex=Ci.toString();u.$pointer.style.zIndex=(Ci*2).toString()}},xn=0,Rt=100,bt=2,xi="0.3s",yo=(s,u,m)=>{let p=m.map(a=>a[0]),w=null,R=null,F=null,E=null,T=xn,$=Rt,q,x,Y=et,xe=bt,ve=!1,I=!1,k=!1,B=0,Z=1/0,ge=!1,pe,ne,ie=!1,Me=!1,we=!1,tt=xi,Pi=[],Ri=a=>{ie||(a.preventDefault&&a.preventDefault(),dt(a),window.addEventListener("mousemove",dt),window.addEventListener("mouseup",ir),En(s,a))},ir=a=>{ie||(pe=void 0,ne=void 0,window.removeEventListener("mousemove",dt),window.removeEventListener("mouseup",ir),tt&&u.classList.add(vt),Tn(s,a))},wo=(a,b)=>{if(p.length<=0)return;if(p.length===1)return p[0].isClicked(a)&&tt&&u.classList.remove(vt),p[0];let O=To(a);if(ge){let W=b,Be=or(W);Be!==void 0&&(W=ze(W,Be)),O?(pe=W,ne=0,tt&&u.classList.remove(vt)):pe!==void 0&&(ne=W-pe,pe=W)}if(!Eo(a)&&!O){for(let W of p)if(!(!W.isClicked(a)||W.disabled))return tt&&u.classList.remove(vt),W;for(let W of p)if(w===W)return W}let K=1/0,se=null;for(let W of p){if(W.disabled)continue;let Be=Math.abs(b-W.percent);Be<K&&(K=Be,se=W)}return se},Ii=()=>p.findIndex(a=>w===a&&!a.disabled),dt=a=>{let b;if(Y===Ce){let{height:K,top:se}=u.getBoundingClientRect(),W=a.type.indexOf("mouse")!==-1?a.clientY:a.touches[0].clientY;b=Math.min(Math.max(0,W-se),K)*100/K}else{let{width:K,left:se}=u.getBoundingClientRect(),W=a.type.indexOf("mouse")!==-1?a.clientX:a.touches[0].clientX;b=Math.min(Math.max(0,W-se),K)*100/K}if((ve||I)&&(b=100-b),w=wo(a.target,b),w&&_o(p,w),ge&&p.length>1&&ne!==void 0){let K=p[0],se=p[p.length-1],W=K.percent+ne<0,Be=se.percent+ne>100;if(W||Be)return;for(let hr=0;hr<p.length;hr++)Ee(hr,p[hr].percent+ne);return}let O=Ii();O!==-1&&(Ee(O,b),w?.$pointer.focus())},sr=a=>{if(ie||document.activeElement!==s||w?.disabled)return;a.stopPropagation(),a.preventDefault();let b=a.deltaY<0,O=ve||I,K=b?!O:O,se=Ii();se!==-1&&(K?It(se,p[se].percent):Bt(se,p[se].percent))},Bi=a=>{ie||Me||(Y===Ce?I?Ee(a,100):Ee(a,0):ve?Bt(a,p[a].percent):It(a,p[a].percent))},ji=a=>{ie||Me||(Y===Ce?I?Ee(a,0):Ee(a,100):ve?It(a,p[a].percent):Bt(a,p[a].percent))},Ni=a=>{ie||Me||(Y===Ce?I?Bt(a,p[a].percent):It(a,p[a].percent):ve?Ee(a,100):Ee(a,0))},Fi=a=>{ie||Me||(Y===Ce?I?It(a,p[a].percent):Bt(a,p[a].percent):ve?Ee(a,0):Ee(a,100))},Eo=a=>a.classList.contains("panel"),To=a=>a.classList.contains("panel-fill"),It=(a,b)=>{if(b===void 0)return;let O=or(b);O==null&&(O=1),b-=O,b<0&&(b=0),Ee(a,b)},Bt=(a,b)=>{if(b===void 0)return;let O=or(b);O==null&&(O=1),b+=O,b>100&&(b=100),Ee(a,b)},ft=()=>{!E||E.update({percents:$i(),values:ki(),$pointers:qi(),min:Vi(),max:Ui(),data:In(),step:Rn(),round:jn(),type:Bn(),textMin:ar(),textMax:ur(),rightToLeft:$n(),bottomToTop:kn(),pointersOverlap:Gn(),pointersMinDistance:Nn(),pointersMaxDistance:Fn(),rangeDragging:Hn(),disabled:qn(),keyboardDisabled:Vn(),mousewheelDisabled:Un()})},Oo=()=>{ft()},Lo=a=>{if(!(k||p.length<=1||$===T))if(a===0){let b=Z*100/($-T);return Math.max(0,p[a+1].percent-b)}else{let b=B*100/($-T);return Math.min(p[a-1].percent+b,100)}},Co=a=>{if(!(k||p.length<=1||$===T))if(a===p.length-1){let b=Z*100/($-T);return Math.min(p[a-1].percent+b,100)}else{let b=B*100/($-T);return Math.max(0,p[a+1].percent-b)}},or=a=>{let b;if(typeof q=="function"){let O=Pt(0,100,T,$,a);b=q(O,a)}else b=q;if(ce(b)){let O=$-T;return b=O===0?0:b*100/O,b}},_t=a=>{if(a===void 0)return;let b=Pt(0,100,T,$,a);return x!==void 0?x[Math.round(b)]:er(b,xe)},ar=()=>x!==void 0?x[T]:T,ur=()=>x!==void 0?x[$]:$,Rn=()=>q,Ao=a=>{var b;return a<=0||k?ar():(b=_t(p[a-1].percent))!=null?b:""},Do=a=>{var b;return p.length<=1||a>=p.length-1||k?ur():(b=_t(p[a+1].percent))!=null?b:""},$i=()=>p.map(a=>a.percent),ki=()=>p.map(a=>_t(a.percent)),qi=()=>p.map(a=>a.$pointer),Vi=()=>T,Ui=()=>$,In=()=>x,Bn=()=>Y,jn=()=>xe,Nn=()=>B,Fn=()=>Z,xo=a=>Pi[a],$n=()=>ve,kn=()=>I,qn=()=>ie,Vn=()=>Me,Un=()=>we,Gn=()=>k,Hn=()=>ge,Ee=(a,b)=>{if(b===void 0)return;let O=or(b);O!==void 0&&(b=ze(b,O));let K=p[a];if(!K)return;let se=K.updatePosition(b,Lo(a),Co(a),Y,ve,I);R?.updatePosition(Y,p.map(W=>W.percent),ve,I),ft();for(let W of p){let Be=_t(W.percent);Be!==void 0&&(W.setAttr("aria-valuenow",Be.toString()),W.setAttr("aria-valuetext",Be.toString()))}Ro(),se&&Ln(s,p.map(W=>_t(W.percent)))},ke=()=>{for(let a=0;a<p.length;a++)Ee(a,p[a].percent)},Po=(a,b)=>{T=x!==void 0?0:Q(a,xn),$=x!==void 0?x.length-1:Q(b,Rt),lr(T),cr($)},Ro=()=>{var a,b;for(let O=0;O<p.length;O++){let K=p[O];K.setAttr("aria-valuemin",((a=Ao(O))!=null?a:"").toString()),K.setAttr("aria-valuemax",((b=Do(O))!=null?b:"").toString())}},lr=a=>{T=Q(a,xn),T>$&&($=T+Rt),ke()},cr=a=>{$=Q(a,Rt),$<T&&($=T+Rt),ke()},Gi=a=>{k=!0;for(let b=0;b<a.length;b++)dr(a[b],b);k=!1;for(let b=0;b<a.length;b++)dr(a[b],b)},dr=(a,b)=>{let O;x!==void 0?(O=a==null?0:An(a,x),O===-1&&(O=0)):(O=Q(a,T),O<T&&(O=T),O>$&&(O=$));let K=Pt(T,$,0,100,O);Ee(b,K)},fr=a=>{if(a==null){q=void 0;return}if(typeof a=="function"){q=a,ke();return}if(ce(a)){q=Q(a,1);let b=Math.abs($-T);q>b&&(q=void 0),ke();return}q=void 0},zn=a=>{k=a,ke()},Wn=a=>{(!ce(a)||a<0)&&(a=0),B=a},Jn=a=>{(!ce(a)||a<0)&&(a=1/0),Z=a},Yn=a=>{ie=a,u.classList.toggle("disabled",ie),ie?u.setAttribute("aria-disabled","true"):u.hasAttribute("aria-disabled")&&u.removeAttribute("aria-disabled")},Hi=a=>{Me=a},zi=a=>{we=a,we?document.removeEventListener("wheel",sr):document.addEventListener("wheel",sr,{passive:!1})},Xn=a=>{if(a==null){x=void 0;return}if(x=Cn(a),x===void 0||x.length<=0){x=void 0;return}lr(0),cr(x.length-1),q===void 0&&fr(1)},Kn=a=>{var b;typeof a=="string"?Y=a.trim().toLowerCase()===Ce?Ce:et:Y=et;let O=(b=s.shadowRoot)==null?void 0:b.querySelector(".range-slider-box");if(!O)return;O.className=`range-slider-box type-${Y}`,ke();let K=Y===Ce?"vertical":"horizontal";for(let se of p)se.setAttr("aria-orientation",K)},Zn=a=>{ve=a,p.length>1&&Di(p,ve,s),ke(),ft()},Qn=a=>{I=a,p.length>1&&Di(p,I,s),ke(),ft()},ei=a=>{xe=Q(a,bt),xe<0&&(xe=bt),ft()},Wi=a=>{a==null||a.toString().trim().toLowerCase()==="false"?(tt=void 0,u.style.removeProperty(mt),u.classList.remove(vt)):(tt=a.toString(),u.style.setProperty(mt,tt),u.classList.add(vt))},Ji=(a,b)=>{let O=p[a];!O||(O.setAttr("aria-label",b),Pi[a]=b)},pr=a=>{if(pe=void 0,p.length<=1){ge=!1,u.classList.remove(Li);return}ge=a,u.classList.toggle(Li,ge)},Io=()=>{Yn(de(s.getAttribute(U))),Me=de(s.getAttribute(ut)),we=de(s.getAttribute(Ze));let a=nr(s,/^pointer([0-9]*)-disabled$/,b=>de(b));for(let b of a){let O=b[0];!p[O]||(p[O].disabled=b[1])}},Bo=()=>{let a=nr(s,/^aria-label([0-9]*)$/);for(let b of a){let O=b[0];Ji(O,b[1])}},jo=a=>{let b=p.length,O=p[b-1].$pointer,K=O.cloneNode(!0);O.after(K);let se=ct(s,K,b);return se.setCallbacks(Bi,ji,Ni,Fi),p.push(se),dr(a,b),ke(),ft(),b},No=()=>{let a=p.length,b=p[a-1];return b?(b.destroy(),p.pop(),p.length<=1&&pr(!1),ke(),ft(),a-1):-1};return(()=>{var a,b;for(let K of p)K.setCallbacks(Bi,ji,Ni,Fi);let O=(a=s.shadowRoot)==null?void 0:a.querySelector(".panel-fill");O&&(R=Dn(O)),Kn(s.getAttribute(ae)),Zn(de(s.getAttribute(He))),Qn(de(s.getAttribute(P))),Po(s.getAttribute(y),s.getAttribute(V)),fr(s.getAttribute(D)),Xn(s.getAttribute(S)),Gi(m.map(K=>K[1])),zn(de(s.getAttribute(l))),Wn(Q(s.getAttribute(f),0)),Jn(Q(s.getAttribute(d),1/0)),pr(de(s.getAttribute(v))),ei(Q(s.getAttribute(J),bt)),Io(),Bo(),F=ho(s,u,p),Wi((b=s.getAttribute(re))!=null?b:xi),u.addEventListener("mousedown",Ri),u.addEventListener("mouseup",ir),u.addEventListener("touchmove",dt),u.addEventListener("touchstart",dt),we||document.addEventListener("wheel",sr,{passive:!1}),E=go(s,Oo,{setValues:Gi,setMin:lr,setMax:cr,setStep:fr,setPointersOverlap:zn,setPointersMinDistance:Wn,setPointersMaxDistance:Jn,setDisabled:Yn,setType:Kn,setRightToLeft:Zn,setBottomToTop:Qn,setRound:ei,setKeyboardDisabled:Hi,setMousewheelDisabled:zi,setRangeDragging:pr,setData:Xn},{getPercents:$i,getValues:ki,getPointerElements:qi,getMin:Vi,getMax:Ui,getStep:Rn,getData:In,getType:Bn,getRound:jn,getTextMin:ar,getTextMax:ur,isRightToLeft:$n,isBottomToTop:kn,isDisabled:qn,isKeyboardDisabled:Vn,isMousewheelDisabled:Un,isPointersOverlap:Gn,isRangeDraggingEnabled:Hn,getPointersMinDistance:Nn,getPointersMaxDistance:Fn}),E.init()})(),{get pointers(){return p},get styles(){return F},get pluginsManager(){return E},get min(){return ar()},get max(){return ur()},get step(){return Rn()},get pointersOverlap(){return Gn()},set pointersOverlap(a){zn(a)},get pointersMinDistance(){return Nn()},set pointersMinDistance(a){Wn(a)},get pointersMaxDistance(){return Fn()},set pointersMaxDistance(a){Jn(a)},get disabled(){return qn()},set disabled(a){Yn(a)},get data(){return In()},get type(){return Bn()},set type(a){Kn(a)},get rightToLeft(){return $n()},set rightToLeft(a){Zn(a)},get bottomToTop(){return kn()},set bottomToTop(a){Qn(a)},get round(){return jn()},set round(a){ei(a)},get animateOnClick(){return tt},set animateOnClick(a){Wi(a)},get keyboardDisabled(){return Vn()},set keyboardDisabled(a){Hi(a)},get mousewheelDisabled(){return Un()},set mousewheelDisabled(a){zi(a)},get rangeDragging(){return Hn()},set rangeDragging(a){pr(a)},setMin:lr,setMax:cr,setValue:dr,setStep:fr,setData:Xn,getTextValue:_t,setAriaLabel:Ji,getAriaLabel:xo,addPointer:jo,removePointer:No,destroy:()=>{u.removeEventListener("mousedown",Ri),u.removeEventListener("mouseup",ir),u.removeEventListener("touchmove",dt),u.removeEventListener("touchstart",dt),document.removeEventListener("wheel",sr);for(let a of p)a.destroy();E?.destroy()}}},So=(s,u,m)=>{let p=Oi.find(([E,T,$,q])=>T.replace("#","")===u.replace(/\d+/g,""));if(p&&s.styles){let[E,T,$,q]=p,x=u.replace(/\D/g,"").trim(),Y=x===""||x==="0"||x==="1"?0:Q(x,0)-1;s.styles.setStyle(E,m,Y);return}switch(s&&s.pluginsManager&&s.pluginsManager.onAttrChange(u,m),u){case y:{s.setMin(m);break}case V:{s.setMax(m);break}case D:{s.setStep(m);break}case l:{s.pointersOverlap=de(m);break}case f:{s.pointersMinDistance=Q(m,0);break}case v:{s.rangeDragging=de(m);break}case d:{s.pointersMaxDistance=Q(m,1/0);break}case U:{s.disabled=de(m);break}case ut:{s.keyboardDisabled=de(m);break}case Ze:{s.mousewheelDisabled=de(m);break}case S:{s.setData(m);break}case ae:{s.type=m;break}case He:{s.rightToLeft=de(m);break}case P:{s.bottomToTop=de(m);break}case J:{s.round=Q(m,bt);break}case Ge:{s.styles&&(s.styles.theme=m);break}case re:{s.animateOnClick=m;break}}let w=null;if(/^value([0-9]*)$/.test(u)&&(w="value"),/^pointer([0-9]*)-disabled$/.test(u)&&(w="pointer-disabled"),/^aria-label([0-9]*)$/.test(u)&&(w="aria-label"),/^pointer([0-9]*)-shape$/.test(u)&&(w="pointer-shape"),!w)return;let R=u.replace(/\D/g,"").trim(),F=R===""||R==="0"||R==="1"?0:Q(R,0)-1;switch(w){case"value":{s.setValue(m,F);break}case"pointer-disabled":{let E=s?.pointers[F];if(!E)return;E.disabled=de(m);break}case"aria-label":{s.setAriaLabel(F,m);break}case"pointer-shape":{s.styles&&s.styles.setPointerShape(F,m);break}}},Mo=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(s){this.slider&&this.slider.setStep(s)}get step(){var s;return(s=this.slider)==null?void 0:s.step}set disabled(s){this.slider&&(this.slider.disabled=s)}get disabled(){var s,u;return(u=(s=this.slider)==null?void 0:s.disabled)!=null?u:!1}set data(s){var u;(u=this.slider)==null||u.setData(s)}get data(){var s;return(s=this.slider)==null?void 0:s.data}set min(s){var u;(u=this.slider)==null||u.setMin(s)}get min(){var s;return(s=this.slider)==null?void 0:s.min}set max(s){var u;(u=this.slider)==null||u.setMax(s)}get max(){var s;return(s=this.slider)==null?void 0:s.max}set round(s){!this.slider||(this.slider.round=s)}get round(){var s,u;return(u=(s=this.slider)==null?void 0:s.round)!=null?u:bt}set type(s){!this.slider||(this.slider.type=s??et)}get type(){var s;return((s=this.slider)==null?void 0:s.type)||et}set pointersOverlap(s){!this.slider||(this.slider.pointersOverlap=s)}get pointersOverlap(){var s,u;return(u=(s=this.slider)==null?void 0:s.pointersOverlap)!=null?u:!1}set pointersMinDistance(s){!this.slider||(this.slider.pointersMinDistance=s)}get pointersMinDistance(){var s,u;return(u=(s=this.slider)==null?void 0:s.pointersMinDistance)!=null?u:0}set pointersMaxDistance(s){!this.slider||(this.slider.pointersMaxDistance=s)}get pointersMaxDistance(){var s,u;return(u=(s=this.slider)==null?void 0:s.pointersMaxDistance)!=null?u:1/0}set theme(s){!this.slider||!this.slider.styles||(this.slider.styles.theme=s)}get theme(){var s,u,m;return(m=(u=(s=this.slider)==null?void 0:s.styles)==null?void 0:u.theme)!=null?m:null}set rtl(s){!this.slider||(this.slider.rightToLeft=s)}get rtl(){var s,u;return(u=(s=this.slider)==null?void 0:s.rightToLeft)!=null?u:!1}set btt(s){!this.slider||(this.slider.bottomToTop=s)}get btt(){var s,u;return(u=(s=this.slider)==null?void 0:s.bottomToTop)!=null?u:!1}set keyboardDisabled(s){!this.slider||(this.slider.keyboardDisabled=s)}get keyboardDisabled(){var s,u;return(u=(s=this.slider)==null?void 0:s.keyboardDisabled)!=null?u:!1}set mousewheelDisabled(s){!this.slider||(this.slider.mousewheelDisabled=s)}get mousewheelDisabled(){var s,u;return(u=(s=this.slider)==null?void 0:s.mousewheelDisabled)!=null?u:!1}set animateOnClick(s){!this.slider||(this.slider.animateOnClick=s)}get animateOnClick(){var s;return(s=this.slider)==null?void 0:s.animateOnClick}get rangeDragging(){var s,u;return(u=(s=this.slider)==null?void 0:s.rangeDragging)!=null?u:!1}set rangeDragging(s){this.slider&&(this.slider.rangeDragging=de(s))}get externalCSSList(){return this._externalCSSList}addPointer(s){var u,m;if(!this.slider)return;let p=(m=(u=this.slider)==null?void 0:u.addPointer(s))!=null?m:0;Ai(this,this.slider,p,`value${p+1}`,`ariaLabel${p+1}`,`pointerShape${p+1}`,`pointer${p+1}Disabled`)}removePointer(){var s;!this.slider||(s=this.slider)==null||s.removePointer()}addCSS(s){if(!this.shadowRoot)return;let u=document.createElement("style");u.textContent=s,this.shadowRoot.appendChild(u)}connectedCallback(){var s,u;if(!this.shadowRoot)return;this._externalCSSList=po(this),this.shadowRoot.innerHTML=i(o,this._externalCSSList);let m=(s=this.shadowRoot)==null?void 0:s.querySelector(".pointer");if(!m)return;let p=(u=this.shadowRoot)==null?void 0:u.getElementById("range-slider");if(!p)return;let w=vo(this,m);this.slider=yo(this,p,w),bo(this,this.slider),this._observer=new MutationObserver(R=>{R.forEach(F=>{var E;if(!this.slider||F.type!=="attributes")return;let T=F.attributeName;!T||So(this.slider,T,(E=this.getAttribute(T))!=null?E:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},Pn=Mo;window.tcRangeSlider=Pn,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",Pn),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends Pn{})})();var gn=class extends HTMLElement{get range_min(){return Number(this.slider.value1)}set range_min(e){this.slider.value1=e}get range_max(){return Number(this.slider.value2)}set range_max(e){this.slider.value2=e}slider;label_range_min;label_range_max;constructor(){super(),this.attachShadow({mode:"open"});let e=document.createElement("div"),t=document.createElement("span");t.textContent="\u79FB\u52D5\u7BC4\u56F2: ",e.appendChild(t);let r=document.createElement("span");r.textContent="0",e.appendChild(r),this.label_range_min=r;let i=document.createElement("tc-range-slider");i.style.padding="0 1em",i.style.display="inline-block",e.appendChild(i),this.slider=i;let o=document.createElement("span");r.textContent="100",e.appendChild(o),this.label_range_max=o,this.shadowRoot?.append(e),this.slider.addEventListener("change",l=>{this.label_range_min.textContent=String(this.slider.value1),this.label_range_max.textContent=String(this.slider.value2)}),this.slider.addEventListener("mouseup",l=>{console.log(`min: ${this.range_min}, max: ${this.range_max}`)})}InitializeSlider(){this.slider.min=0,this.slider.max=100,this.slider.step=1,this.slider.value1=0,this.slider.value2=100,this.slider.sliderWidth="200px",this.slider.style.padding="0 1em"}};customElements.define("slider-container",gn);var Su;async function Mu(){console.log("main loaded."),Su=new hn}window.onload=Mu;
/*! Bundled license information:

buttplug/dist/main/src/core/Logging.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

buttplug/dist/main/src/core/Messages.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/core/Exceptions.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/ButtplugClientDevice.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/ButtplugClientConnectorException.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/Client.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/core/MessageUtils.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/utils/ButtplugMessageSorter.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/utils/ButtplugBrowserWebsocketConnector.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/ButtplugBrowserWebsocketClientConnector.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/ButtplugNodeWebsocketClientConnector.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/client/IButtplugClientConnector.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)

buttplug/dist/main/src/index.js:
  (*!
   * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
   * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
   * project root for full license information.
   *
   * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
   *)
*/
